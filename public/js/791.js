/*! For license information please see 791.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[791],{4975:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(6314),a=r.n(n)()(function(t){return t[1]});a.push([t.id,"",""]);const o=a},6791:(t,e,r)=>{r.r(e),r.d(e,{default:()=>d});var n=r(4065);function a(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function i(r,n,a,s){var i=n&&n.prototype instanceof u?n:u,c=Object.create(i.prototype);return o(c,"_invoke",function(r,n,a){var o,s,i,u=0,c=a||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return o=e,s=0,i=t,d.n=r,l}};function p(r,n){for(s=r,i=n,e=0;!f&&u&&!a&&e<c.length;e++){var a,o=c[e],p=d.p,m=o[2];r>3?(a=m===n)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,d.v=n,d.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,d.n=m,s=0))}if(a||r>1)return l;throw f=!0,n}return function(a,c,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,m),s=c,i=m;(e=s<2?t:i)||!f;){o||(s?s<3?(s>1&&(d.n=-1),p(s,i)):d.n=i:d.v=i);try{if(u=2,o){if(s||(a="next"),e=o[a]){if(!(e=e.call(o,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((e=(f=d.n<0)?i:r.call(n,d))!==l)break}catch(e){o=t,s=1,i=e}finally{u=1}}return{value:e,done:f}}}(r,a,s),!0),c}var l={};function u(){}function c(){}function f(){}e=Object.getPrototypeOf;var d=[][n]?e(e([][n]())):(o(e={},n,function(){return this}),e),p=f.prototype=u.prototype=Object.create(d);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,s,"GeneratorFunction")),t.prototype=Object.create(p),t}return c.prototype=f,o(p,"constructor",f),o(f,"constructor",c),c.displayName="GeneratorFunction",o(f,s,"GeneratorFunction"),o(p),o(p,s,"Generator"),o(p,n,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m}})()}function o(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}o=function(t,e,r,n){if(e)a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var s=function(e,r){o(t,e,function(t){return this._invoke(e,r,t)})};s("next",0),s("throw",1),s("return",2)}},o(t,e,r,n)}function s(t,e,r,n,a,o,s){try{var i=t[o](s),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}const i={name:"AdminOrderIndex",data:function(){return{isBusy:!1,orders:[],fields:[{key:"order_number",label:"Order Number",sortable:!0},{key:"customer_name",label:"Customer",sortable:!0},{key:"total_amount",label:"Total Amount",sortable:!0,formatter:function(t){return"Rp".concat(parseFloat(t).toFixed(2))}},{key:"status",label:"Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],statusOptions:[{value:null,text:"All Statuses"},{value:"pending",text:"Pending"},{value:"paid",text:"Paid"},{value:"file_upload",text:"File Upload"},{value:"processing",text:"Processing"},{value:"ready",text:"Ready"},{value:"completed",text:"Completed"},{value:"cancelled",text:"Cancelled"}],filters:{status:null,customer_name:""},pagination:{currentPage:1,perPage:15,total:0}}},created:function(){this.fetchOrders()},methods:{fetchOrders:function(){var t,e=arguments,r=this;return(t=a().m(function t(){var o,s,i,l,u;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return o=e.length>0&&void 0!==e[0]?e[0]:1,r.isBusy=!0,t.p=1,s={page:o,per_page:r.pagination.perPage,status:r.filters.status,customer_name:r.filters.customer_name},t.n=2,n.A.getAdminOrders(s);case 2:i=t.v,r.orders=i.data,r.pagination.total=i.total,r.pagination.currentPage=i.current_page,t.n=4;break;case 3:t.p=3,u=t.v,console.error("Failed to fetch orders:",u),l=u.error||"Failed to load orders. Please try again.",r.$bvToast.toast(l,{title:"Error",variant:"danger",solid:!0}),r.orders=[];case 4:return t.p=4,r.isBusy=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}),function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,l,"next",t)}function l(t){s(o,n,a,i,l,"throw",t)}i(void 0)})})()},onPageChange:function(t){this.fetchOrders(t)},applyFilters:function(){this.pagination.currentPage=1,this.fetchOrders(1)},resetFilters:function(){this.filters.status=null,this.filters.customer_name="",this.pagination.currentPage=1,this.fetchOrders(1)},getStatusVariant:function(t){return{pending:"secondary",paid:"info",file_upload:"warning",processing:"primary",ready:"success",completed:"success",cancelled:"danger"}[t]||"secondary"},formatDate:function(t){return t?new Date(t).toLocaleString("id-ID"):""}}};var l=r(5072),u=r.n(l),c=r(4975),f={insert:"head",singleton:!1};u()(c.A,f);c.A.locals;const d=(0,r(4486).A)(i,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",{staticClass:"mb-3"},[r("b-col",{attrs:{md:"6"}},[r("h2",[t._v("Order Management")])]),t._v(" "),r("b-col",{staticClass:"text-md-right",attrs:{md:"6"}})],1),t._v(" "),r("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[r("b-card-body",[r("b-row",[r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Status:","label-for":"filter-status"}},[r("b-form-select",{attrs:{id:"filter-status",options:t.statusOptions},on:{change:t.applyFilters},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Search Customer:","label-for":"filter-customer"}},[r("b-form-input",{attrs:{id:"filter-customer",placeholder:"Enter customer name..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)}},model:{value:t.filters.customer_name,callback:function(e){t.$set(t.filters,"customer_name",e)},expression:"filters.customer_name"}})],1)],1),t._v(" "),r("b-col",{staticClass:"d-flex align-items-end",attrs:{md:"4"}},[r("b-button",{attrs:{variant:"primary"},on:{click:t.applyFilters}},[t._v("Apply Filters")]),t._v(" "),r("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:t.resetFilters}},[t._v("Reset")])],1)],1)],1)],1),t._v(" "),r("b-card",{attrs:{"no-body":""}},[r("b-table",{attrs:{striped:"",hover:"",responsive:"",items:t.orders,fields:t.fields,busy:t.isBusy,"show-empty":"","empty-text":"No orders found.","empty-filtered-text":"No orders match your filters."},scopedSlots:t._u([{key:"cell(order_number)",fn:function(e){return[r("router-link",{attrs:{to:{name:"AdminOrderDetail",params:{id:e.item.id}}}},[t._v("\n          "+t._s(e.item.order_number)+"\n        ")])]}},{key:"cell(customer_name)",fn:function(e){return[t._v("\n        "+t._s(e.item.customer_name)+"\n      ")]}},{key:"cell(total_amount)",fn:function(e){return[t._v("\n        Rp"+t._s(parseFloat(e.item.total_amount).toFixed(2))+"\n      ")]}},{key:"cell(status)",fn:function(e){return[r("b-badge",{attrs:{variant:t.getStatusVariant(e.item.status)}},[t._v("\n          "+t._s(e.item.status)+"\n        ")])]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.item.created_at))+"\n      ")]}},{key:"cell(actions)",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary",to:{name:"AdminOrderDetail",params:{id:e.item.id}}}},[t._v("\n          View\n        ")])]}}])}),t._v(" "),r("b-card-footer",{staticClass:"d-flex justify-content-between align-items-center"},[r("div",[r("strong",[t._v("Total Orders:")]),t._v(" "+t._s(t.pagination.total)+"\n      ")]),t._v(" "),r("b-pagination",{attrs:{"total-rows":t.pagination.total,"per-page":t.pagination.perPage},on:{change:t.onPageChange},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)],1)],1)},[],!1,null,"0a77ff52",null).exports}}]);