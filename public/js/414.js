/*! For license information please see 414.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[414],{1405:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(6314),o=r.n(n)()(function(t){return t[1]});o.push([t.id,"",""]);const a=o},7414:(t,e,r)=>{r.r(e),r.d(e,{default:()=>p});var n=r(7728);function o(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(r,n,o,i){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return a(l,"_invoke",function(r,n,o){var a,i,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return a=e,i=0,c=t,f.n=r,u}};function p(r,n){for(i=r,c=n,e=0;!d&&s&&!o&&e<l.length;e++){var o,a=l[e],p=f.p,v=a[2];r>3?(o=v===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,f.v=n,f.n=a[1]):p<v&&(o=r<3||a[0]>n||n>v)&&(a[4]=r,a[5]=n,f.n=v,i=0))}if(o||r>1)return u;throw d=!0,n}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),i=l,c=v;(e=i<2?t:c)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(s=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(d=f.n<0)?c:r.call(n,f))!==u)break}catch(e){a=t,i=1,c=e}finally{s=1}}return{value:e,done:d}}}(r,o,i),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(a(e={},n,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,a(p,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,n,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m:v}})()}function a(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,r,n){if(e)o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var i=function(e,r){a(t,e,function(t){return this._invoke(e,r,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,r,n)}function i(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)})}}const u={name:"AdminProductIndex",data:function(){return{isBusy:!1,products:[],fields:[{key:"name",label:"Name",sortable:!0},{key:"thumbnail",label:"Thumbnail"},{key:"price",label:"Price",sortable:!0},{key:"is_active",label:"Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],filters:{search:""},pagination:{currentPage:1,perPage:15,total:0},itemToDelete:{id:null,name:""}}},created:function(){this.fetchProducts()},methods:{fetchProducts:function(){var t=arguments,e=this;return c(o().m(function r(){var a,i,c,u,s;return o().w(function(r){for(;;)switch(r.p=r.n){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:1,e.isBusy=!0,r.p=1,i={page:a,per_page:e.pagination.perPage,search:e.filters.search},r.n=2,n.A.getAdminProducts(i);case 2:c=r.v,e.products=c.data,e.pagination.total=c.total,e.pagination.currentPage=c.current_page,r.n=4;break;case 3:r.p=3,s=r.v,console.error("Failed to fetch products:",s),u=s.error||"Failed to load products. Please try again.",e.$bvToast.toast(u,{title:"Error",variant:"danger",solid:!0}),e.products=[];case 4:return r.p=4,e.isBusy=!1,r.f(4);case 5:return r.a(2)}},r,null,[[1,3,4,5]])}))()},onPageChange:function(t){this.fetchProducts(t)},applyFilters:function(){this.pagination.currentPage=1,this.fetchProducts(1)},resetFilters:function(){this.filters.search="",this.pagination.currentPage=1,this.fetchProducts(1)},confirmDelete:function(t,e){this.itemToDelete.id=t,this.itemToDelete.name=e,this.$bvModal.show("delete-product-modal")},deleteProduct:function(t){var e=this;return c(o().m(function r(){var a,i;return o().w(function(r){for(;;)switch(r.p=r.n){case 0:return t.preventDefault(),r.p=1,r.n=2,n.A.deleteAdminProduct(e.itemToDelete.id);case 2:e.$bvToast.toast("Product '".concat(e.itemToDelete.name,"' deleted successfully."),{title:"Success",variant:"success",solid:!0}),e.fetchProducts(e.pagination.currentPage),e.$bvModal.hide("delete-product-modal"),r.n=4;break;case 3:r.p=3,i=r.v,console.error("Failed to delete product:",i),a=i.error||"Failed to delete product. Please try again.",e.$bvToast.toast(a,{title:"Error",variant:"danger",solid:!0}),e.$bvModal.hide("delete-product-modal");case 4:return r.a(2)}},r,null,[[1,3]])}))()},formatDate:function(t){return t?new Date(t).toLocaleString("id-ID"):""},getThumbnailUrl:function(t){return"/storage/".concat(t)}}};var s=r(5072),l=r.n(s),d=r(1405),f={insert:"head",singleton:!1};l()(d.A,f);d.A.locals;const p=(0,r(4486).A)(u,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",{staticClass:"mb-3"},[r("b-col",{attrs:{md:"6"}},[r("h2",[t._v("Product Management")])]),t._v(" "),r("b-col",{staticClass:"text-md-right",attrs:{md:"6"}},[r("b-button",{attrs:{variant:"success",to:{name:"AdminProductCreate"}}},[r("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-circle"}}),t._v("\n        Add New Product\n      ")],1)],1)],1),t._v(" "),r("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[r("b-card-body",[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Search Product:","label-for":"filter-product"}},[r("b-form-input",{attrs:{id:"filter-product",placeholder:"Enter product name..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)}},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1)],1),t._v(" "),r("b-col",{staticClass:"d-flex align-items-end",attrs:{md:"6"}},[r("b-button",{attrs:{variant:"primary"},on:{click:t.applyFilters}},[t._v("Apply Filters")]),t._v(" "),r("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:t.resetFilters}},[t._v("Reset")])],1)],1)],1)],1),t._v(" "),r("b-card",{attrs:{"no-body":""}},[r("b-table",{attrs:{striped:"",hover:"",responsive:"",items:t.products,fields:t.fields,busy:t.isBusy,"show-empty":"","empty-text":"No products found.","empty-filtered-text":"No products match your filters."},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[r("router-link",{attrs:{to:{name:"AdminProductEdit",params:{id:e.item.id}}}},[t._v("\n          "+t._s(e.item.name)+"\n        ")])]}},{key:"cell(thumbnail)",fn:function(e){return[e.item.thumbnail?r("b-img",{staticStyle:{"max-height":"50px",width:"auto"},attrs:{src:t.getThumbnailUrl(e.item.thumbnail),alt:e.item.name,thumbnail:"",fluid:""}}):r("span",[t._v("No Image")])]}},{key:"cell(price)",fn:function(e){return[t._v("\n        Rp"+t._s(parseFloat(e.item.price).toFixed(2))+"\n      ")]}},{key:"cell(is_active)",fn:function(e){return[r("b-badge",{attrs:{variant:e.item.is_active?"success":"secondary"}},[t._v("\n          "+t._s(e.item.is_active?"Active":"Inactive")+"\n        ")])]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.item.created_at))+"\n      ")]}},{key:"cell(actions)",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary",to:{name:"AdminProductEdit",params:{id:e.item.id}}}},[t._v("\n          Edit\n        ")]),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return t.confirmDelete(e.item.id,e.item.name)}}},[t._v("\n          Delete\n        ")])]}}])}),t._v(" "),r("b-card-footer",{staticClass:"d-flex justify-content-between align-items-center"},[r("div",[r("strong",[t._v("Total Products:")]),t._v(" "+t._s(t.pagination.total)+"\n      ")]),t._v(" "),r("b-pagination",{attrs:{"total-rows":t.pagination.total,"per-page":t.pagination.perPage},on:{change:t.onPageChange},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)],1),t._v(" "),r("b-modal",{attrs:{id:"delete-product-modal",title:"Confirm Delete","ok-variant":"danger","ok-title":"Delete"},on:{ok:t.deleteProduct}},[r("p",[t._v("Are you sure you want to delete product "),r("strong",[t._v(t._s(t.itemToDelete.name))]),t._v("?")]),t._v(" "),r("p",{staticClass:"text-danger"},[r("small",[t._v("This action cannot be undone.")])])])],1)},[],!1,null,"237e9f4e",null).exports},7728:(t,e,r)=>{r.d(e,{A:()=>d});var n=r(7304);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function c(r,n,o,a){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return i(l,"_invoke",function(r,n,o){var a,i,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return a=e,i=0,c=t,f.n=r,u}};function p(r,n){for(i=r,c=n,e=0;!d&&s&&!o&&e<l.length;e++){var o,a=l[e],p=f.p,v=a[2];r>3?(o=v===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,f.v=n,f.n=a[1]):p<v&&(o=r<3||a[0]>n||n>v)&&(a[4]=r,a[5]=n,f.n=v,i=0))}if(o||r>1)return u;throw d=!0,n}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),i=l,c=v;(e=i<2?t:c)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(s=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(d=f.n<0)?c:r.call(n,f))!==u)break}catch(e){a=t,i=1,c=e}finally{s=1}}return{value:e,done:d}}}(r,o,a),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(i(e={},n,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,i(p,"constructor",d),i(d,"constructor",l),l.displayName="GeneratorFunction",i(d,o,"GeneratorFunction"),i(p),i(p,o,"Generator"),i(p,n,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:v}})()}function i(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,r,n){if(e)o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var a=function(e,r){i(t,e,function(t){return this._invoke(e,r,t)})};a("next",0),a("throw",1),a("return",2)}},i(t,e,r,n)}function c(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function i(t){c(a,n,o,i,u,"next",t)}function u(t){c(a,n,o,i,u,"throw",t)}i(void 0)})}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}const d=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"getProducts",value:(v=u(a().m(function t(){var e,r,o,i,c=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:{},t.p=1,t.n=2,n.A.get("/products",{params:e});case 2:return r=t.v,t.a(2,r.data);case 3:throw t.p=3,i=t.v,(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch products"};case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return v.apply(this,arguments)})},{key:"getProduct",value:(p=u(a().m(function t(e){var r,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.get("/products/".concat(e));case 1:return r=t.v,t.a(2,r.data);case 2:throw t.p=2,i=t.v,(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return p.apply(this,arguments)})},{key:"getProductTemplates",value:(f=u(a().m(function t(e){var r,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.get("/products/".concat(e,"/templates"));case 1:return r=t.v,t.a(2,r.data);case 2:throw t.p=2,i=t.v,(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch templates"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return f.apply(this,arguments)})},{key:"getAdminProducts",value:(d=u(a().m(function t(){var e,r,o,i,c=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:{},t.p=1,t.n=2,n.A.get("/admin/products",{params:e});case 2:return r=t.v,t.a(2,r.data);case 3:throw t.p=3,i=t.v,console.error("ProductService.getAdminProducts failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin products"};case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return d.apply(this,arguments)})},{key:"getAdminProduct",value:(l=u(a().m(function t(e){var r,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.get("/admin/products/".concat(e));case 1:return r=t.v,t.a(2,r.data);case 2:throw t.p=2,i=t.v,console.error("ProductService.getAdminProduct(".concat(e,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin product details"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return l.apply(this,arguments)})},{key:"createAdminProduct",value:(c=u(a().m(function t(e){var r,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.post("/admin/products",e);case 1:return r=t.v,t.a(2,r.data);case 2:throw t.p=2,i=t.v,console.error("ProductService.createAdminProduct failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to create product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return c.apply(this,arguments)})},{key:"updateAdminProduct",value:(i=u(a().m(function t(e,r){var o,i,c;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.post("/admin/products/".concat(e),r);case 1:return o=t.v,t.a(2,o.data);case 2:throw t.p=2,c=t.v,console.error("ProductService.updateAdminProduct(".concat(e,") failed:"),c),(null===(i=c.response)||void 0===i?void 0:i.data)||{error:"Failed to update product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t,e){return i.apply(this,arguments)})},{key:"deleteAdminProduct",value:(o=u(a().m(function t(e){var r,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.delete("/admin/products/".concat(e));case 1:return r=t.v,t.a(2,r.data);case 2:throw t.p=2,i=t.v,console.error("ProductService.deleteAdminProduct(".concat(e,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to delete product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return o.apply(this,arguments)})}],e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o,i,c,l,d,f,p,v}())}}]);