/*! For license information please see 317.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[317],{1317:(t,e,r)=>{r.r(e),r.d(e,{default:()=>f});var a=r(4065);function n(){var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function s(r,a,n,o){var s=a&&a.prototype instanceof c?a:c,l=Object.create(s.prototype);return i(l,"_invoke",function(r,a,n){var i,o,s,c=0,l=n||[],p=!1,u={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return i=e,o=0,s=t,u.n=r,d}};function f(r,a){for(o=r,s=a,e=0;!p&&c&&!n&&e<l.length;e++){var n,i=l[e],f=u.p,m=i[2];r>3?(n=m===a)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=f&&((n=r<2&&f<i[1])?(o=0,u.v=a,u.n=i[1]):f<m&&(n=r<3||i[0]>a||a>m)&&(i[4]=r,i[5]=a,u.n=m,o=0))}if(n||r>1)return d;throw p=!0,a}return function(n,l,m){if(c>1)throw TypeError("Generator is already running");for(p&&1===l&&f(l,m),o=l,s=m;(e=o<2?t:s)||!p;){i||(o?o<3?(o>1&&(u.n=-1),f(o,s)):u.n=s:u.v=s);try{if(c=2,i){if(o||(n="next"),e=i[n]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,o<2&&(o=0)}else 1===o&&(e=i.return)&&e.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),o=1);i=t}else if((e=(p=u.n<0)?s:r.call(a,u))!==d)break}catch(e){i=t,o=1,s=e}finally{c=1}}return{value:e,done:p}}}(r,n,o),!0),l}var d={};function c(){}function l(){}function p(){}e=Object.getPrototypeOf;var u=[][a]?e(e([][a]())):(i(e={},a,function(){return this}),e),f=p.prototype=c.prototype=Object.create(u);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=p,i(f,"constructor",p),i(p,"constructor",l),l.displayName="GeneratorFunction",i(p,o,"GeneratorFunction"),i(f),i(f,o,"Generator"),i(f,a,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m}})()}function i(t,e,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}i=function(t,e,r,a){if(e)n?n(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r;else{var o=function(e,r){i(t,e,function(t){return this._invoke(e,r,t)})};o("next",0),o("throw",1),o("return",2)}},i(t,e,r,a)}function o(t,e,r,a,n,i,o){try{var s=t[i](o),d=s.value}catch(t){return void r(t)}s.done?e(d):Promise.resolve(d).then(a,n)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var i=t.apply(e,r);function s(t){o(i,a,n,s,d,"next",t)}function d(t){o(i,a,n,s,d,"throw",t)}s(void 0)})}}const d={name:"OrderTimeline",data:function(){return{order:null,timeline:[],loading:!1,error:null,currentStepIndex:-1}},computed:{breadcrumbItems:function(){var t=[{text:"Dashboard",to:{name:"Dashboard"}},{text:"Orders",to:{name:"Orders"}}];return this.order&&t.push({text:"Order #".concat(this.order.order_number),to:{name:"OrderDetail",params:{id:this.$route.params.id}}}),t.push({text:"Progress",active:!0}),t},currentStep:function(){return this.currentStepIndex>=0&&this.currentStepIndex<this.timeline.length?this.timeline[this.currentStepIndex]:null}},created:function(){var t=this;return s(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadOrder();case 1:return e.n=2,t.loadTimeline();case 2:return e.a(2)}},e)}))()},methods:{loadOrder:function(){var t=this;return s(n().m(function e(){var r,i,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=t.$route.params.id,e.n=1,a.A.getOrder(r);case 1:i=e.v,t.order=i.data,e.n=3;break;case 2:e.p=2,o=e.v,console.warn("Failed to load order for breadcrumb:",o);case 3:return e.a(2)}},e,null,[[0,2]])}))()},loadTimeline:function(){var t=this;return s(n().m(function e(){var r,i,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loading=!0,t.error=null,e.p=1,r=t.$route.params.id,e.n=2,a.A.getOrderTimeline(r);case 2:i=e.v,t.timeline=i.data||[],t.determineCurrentStep(),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Failed to load timeline:",o),t.error=o.message||"Failed to load order progress.";case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},determineCurrentStep:function(){for(var t=-1,e=this.timeline.length-1;e>=0;e--)if(this.timeline[e].timestamp){t=e;break}this.currentStepIndex=t},getTimelineIcon:function(t){return{created:"cart-plus",paid:"cash-coin",file_uploaded:"cloud-upload",processing:"gear",ready:"box-seam",completed:"check-circle",cancelled:"x-circle"}[t]||"question-circle"},getTimelineIconVariant:function(t){return{created:"secondary",paid:"success",file_uploaded:"info",processing:"primary",ready:"warning",completed:"success",cancelled:"danger"}[t]||"secondary"},formatDate:function(t){if(!t)return"N/A";return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}};var c=r(5072),l=r.n(c),p=r(1897),u={insert:"head",singleton:!1};l()(p.A,u);p.A.locals;const f=(0,r(4486).A)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[t.loading?r("b-row",[r("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Loading order progress...")])],1)],1):t.error?r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-alert",{attrs:{variant:"danger",show:""}},[r("h4",[r("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Error")],1),t._v(" "),r("p",[t._v(t._s(t.error))]),t._v(" "),t.order?r("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:t.$route.params.id}},variant:"primary",size:"sm"}},[r("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Order\n        ")],1):t._e(),t._v(" "),r("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary",size:"sm"}},[r("b-icon",{attrs:{icon:"list"}}),t._v(" View All Orders\n        ")],1)],1)],1)],1):t.timeline.length>0?r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-card",[r("div",{staticClass:"wizard-container"},t._l(t.timeline,function(e,a){return r("div",{key:a,class:["wizard-step",{active:a===t.currentStepIndex},{completed:a<t.currentStepIndex},{future:a>t.currentStepIndex},{"no-timestamp":!e.timestamp}]},[r("div",{staticClass:"step-line"}),t._v(" "),r("div",{staticClass:"step-icon-wrapper"},[r("div",{staticClass:"step-icon"},[r("b-icon",{attrs:{icon:t.getTimelineIcon(e.status),variant:t.getTimelineIconVariant(e.status)}})],1)]),t._v(" "),r("div",{staticClass:"step-label"},[t._v(t._s(e.label))]),t._v(" "),e.timestamp?r("div",{staticClass:"step-date text-muted small"},[t._v("\n              "+t._s(t.formatDate(e.timestamp))+"\n            ")]):r("div",{staticClass:"step-date text-muted small"},[t._v("\n              Pending\n            ")])])}),0),t._v(" "),t.currentStep?r("div",{staticClass:"current-step-detail mt-4 p-3 bg-light rounded"},[r("h4",{staticClass:"mb-2"},[r("b-icon",{staticClass:"mr-2",attrs:{icon:t.getTimelineIcon(t.currentStep.status),variant:t.getTimelineIconVariant(t.currentStep.status)}}),t._v("\n            "+t._s(t.currentStep.label)+"\n          ")],1),t._v(" "),r("p",{staticClass:"mb-1"},[t._v(t._s(t.currentStep.description))]),t._v(" "),r("small",{staticClass:"text-muted"},[r("b-icon",{attrs:{icon:"clock"}}),t._v(" "+t._s(t.formatDate(t.currentStep.timestamp))+"\n          ")],1),t._v(" "),t.currentStep.pickup_code?r("div",{staticClass:"mt-2"},[r("strong",[t._v("Pickup Code:")]),t._v(" "),r("code",{staticClass:"bg-white px-2 py-1 rounded"},[t._v(t._s(t.currentStep.pickup_code))])]):t._e()]):t._e()])],1)],1):r("b-row",[r("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[r("b-icon",{attrs:{icon:"hourglass-split","font-scale":"3",variant:"secondary"}}),t._v(" "),r("h4",{staticClass:"mt-3"},[t._v("No timeline data available.")]),t._v(" "),r("p",{staticClass:"text-muted"},[t._v("The progress for this order will be updated as it advances.")]),t._v(" "),t.order?r("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:t.$route.params.id}},variant:"primary"}},[r("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Order\n      ")],1):t._e(),t._v(" "),r("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary"}},[r("b-icon",{attrs:{icon:"list"}}),t._v(" View All Orders\n      ")],1)],1)],1)],1)},[],!1,null,"2d9809fe",null).exports},1897:(t,e,r)=>{r.d(e,{A:()=>i});var a=r(6314),n=r.n(a)()(function(t){return t[1]});n.push([t.id,'.wizard-container[data-v-2d9809fe]{display:flex;justify-content:space-between;margin:2rem 0;position:relative}.wizard-container[data-v-2d9809fe]:before{background-color:#ced4da;content:"";height:2px;left:0;position:absolute;right:0;top:20px;z-index:1}.wizard-step[data-v-2d9809fe]{align-items:center;display:flex;flex:1;flex-direction:column;padding:0 10px;position:relative;z-index:2}.step-line[data-v-2d9809fe]{background-color:#ced4da;height:2px;left:0;position:absolute;right:0;top:20px;transition:background-color .3s ease}.wizard-step:first-child .step-line[data-v-2d9809fe]{left:50%}.wizard-step:last-child .step-line[data-v-2d9809fe]{right:50%}.step-icon-wrapper[data-v-2d9809fe]{margin-bottom:.5rem;position:relative}.step-icon[data-v-2d9809fe]{align-items:center;background-color:#e9ecef;border:2px solid #ced4da;border-radius:50%;color:#6c757d;display:flex;font-size:1.2rem;height:42px;justify-content:center;transition:all .3s ease;width:42px}.step-label[data-v-2d9809fe]{font-size:.85rem;font-weight:500;margin-bottom:.25rem;transition:color .3s ease}.step-date[data-v-2d9809fe],.step-label[data-v-2d9809fe]{color:#6c757d;max-width:100px;text-align:center;word-break:break-word}.step-date[data-v-2d9809fe]{font-size:.7rem}.wizard-step.future .step-icon[data-v-2d9809fe]{background-color:#f8f9fa;border-color:#ced4da;color:#6c757d}.wizard-step.future .step-date[data-v-2d9809fe],.wizard-step.future .step-label[data-v-2d9809fe]{color:#6c757d}.wizard-step.future .step-line[data-v-2d9809fe]{background-color:#ced4da}.wizard-step.completed .step-icon[data-v-2d9809fe]{background-color:#28a745;border-color:#28a745;color:#fff}.wizard-step.completed .step-label[data-v-2d9809fe]{color:#28a745;font-weight:700}.wizard-step.completed .step-date[data-v-2d9809fe]{color:#28a745}.wizard-step.completed .step-line[data-v-2d9809fe]{background-color:#28a745}.wizard-step.active .step-icon[data-v-2d9809fe]{background-color:#007bff;border-color:#007bff;box-shadow:0 2px 4px rgba(0,0,0,.2);color:#fff;transform:scale(1.1)}.wizard-step.active .step-label[data-v-2d9809fe]{color:#007bff;font-weight:700}.wizard-step.active .step-date[data-v-2d9809fe]{color:#007bff}.wizard-step.active .step-line[data-v-2d9809fe]{background-color:#28a745}.wizard-step.no-timestamp .step-date[data-v-2d9809fe]{font-style:italic}.current-step-detail h4[data-v-2d9809fe]{margin-top:0}.current-step-detail code[data-v-2d9809fe]{font-size:1rem}@media (max-width:767.98px){.wizard-container[data-v-2d9809fe]{flex-wrap:wrap}.wizard-step[data-v-2d9809fe]{flex:0 0 50%;margin-bottom:2rem}.wizard-step[data-v-2d9809fe]:nth-child(odd){padding-right:20px}.wizard-step[data-v-2d9809fe]:nth-child(2n){padding-left:20px}.wizard-container[data-v-2d9809fe]:before{display:none}.step-label[data-v-2d9809fe]{font-size:.75rem;max-width:80px}.step-date[data-v-2d9809fe]{font-size:.65rem;max-width:80px}.step-icon[data-v-2d9809fe]{font-size:1rem;height:36px;width:36px}}@media (max-width:575.98px){.wizard-step[data-v-2d9809fe]{flex:0 0 100%;margin-bottom:1.5rem;padding:0 10px!important}.step-date[data-v-2d9809fe],.step-label[data-v-2d9809fe]{max-width:none}}',""]);const i=n}}]);