/*! For license information please see 223.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[223],{3420:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(6314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,"",""]);const a=o},3990:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(7304);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function s(r,n,o,a){var s=n&&n.prototype instanceof u?n:u,l=Object.create(s.prototype);return i(l,"_invoke",function(r,n,o){var a,i,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,i=0,s=e,d.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!f&&u&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,m=a[2];r>3?(o=m===n)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,d.v=n,d.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,d.n=m,i=0))}if(o||r>1)return c;throw f=!0,n}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,m),i=l,s=m;(t=i<2?e:s)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,s)):d.n=s:d.v=s);try{if(u=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?s:r.call(n,d))!==c)break}catch(t){a=e,i=1,s=t}finally{u=1}}return{value:t,done:f}}}(r,o,a),!0),l}var c={};function u(){}function l(){}function f(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(i(t={},n,function(){return this}),t),p=f.prototype=u.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,i(p,"constructor",f),i(f,"constructor",l),l.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(p),i(p,o,"Generator"),i(p,n,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m}})()}function i(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){i(e,t,function(e){return this._invoke(t,r,e)})};a("next",0),a("throw",1),a("return",2)}},i(e,t,r,n)}function s(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,c,"next",e)}function c(e){s(a,n,o,i,c,"throw",e)}i(void 0)})}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}const f=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getAdminUsers",value:(f=c(a().m(function e(){var t,r,o,i,s=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.p=1,e.n=2,n.A.get("/admin/users",{params:t});case 2:return r=e.v,e.a(2,r.data);case 3:throw e.p=3,i=e.v,console.error("UserService.getAdminUsers failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin users"};case 4:return e.a(2)}},e,null,[[1,3]])})),function(){return f.apply(this,arguments)})},{key:"getAdminUser",value:(l=c(a().m(function e(t){var r,o,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.A.get("/admin/users/".concat(t));case 1:return r=e.v,e.a(2,r.data);case 2:throw e.p=2,i=e.v,console.error("UserService.getAdminUser(".concat(t,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin user details"};case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return l.apply(this,arguments)})},{key:"createAdminUser",value:(s=c(a().m(function e(t){var r,o,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.A.post("/admin/users",t);case 1:return r=e.v,e.a(2,r.data);case 2:throw e.p=2,i=e.v,console.error("UserService.createAdminUser failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to create admin user"};case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return s.apply(this,arguments)})},{key:"updateAdminUser",value:(i=c(a().m(function e(t,r){var o,i,s;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.A.put("/admin/users/".concat(t),r);case 1:return o=e.v,e.a(2,o.data);case 2:throw e.p=2,s=e.v,console.error("UserService.updateAdminUser(".concat(t,") failed:"),s),(null===(i=s.response)||void 0===i?void 0:i.data)||{error:"Failed to update admin user"};case 3:return e.a(2)}},e,null,[[0,2]])})),function(e,t){return i.apply(this,arguments)})},{key:"deleteAdminUser",value:(o=c(a().m(function e(t){var r,o,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.A.delete("/admin/users/".concat(t));case 1:return r=e.v,e.a(2,r.data);case 2:throw e.p=2,i=e.v,console.error("UserService.deleteAdminUser(".concat(t,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to delete admin user"};case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return o.apply(this,arguments)})}],t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,o,i,s,l,f}())},9223:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var n=r(5353),o=r(3990);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var i=n&&n.prototype instanceof u?n:u,l=Object.create(i.prototype);return s(l,"_invoke",function(r,n,o){var a,i,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,i=0,s=e,d.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!f&&u&&!o&&t<l.length;t++){var o,a=l[t],p=d.p,m=a[2];r>3?(o=m===n)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,d.v=n,d.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,d.n=m,i=0))}if(o||r>1)return c;throw f=!0,n}return function(o,l,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,m),i=l,s=m;(t=i<2?e:s)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,s)):d.n=s:d.v=s);try{if(u=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?s:r.call(n,d))!==c)break}catch(t){a=e,i=1,s=t}finally{u=1}}return{value:t,done:f}}}(r,o,a),!0),l}var c={};function u(){}function l(){}function f(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(s(t={},n,function(){return this}),t),p=f.prototype=u.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,s(p,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,o,"GeneratorFunction"),s(p),s(p,o,"Generator"),s(p,n,function(){return this}),s(p,"toString",function(){return"[object Generator]"}),(i=function(){return{w:a,m}})()}function s(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}s=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){s(e,t,function(e){return this._invoke(t,r,e)})};a("next",0),a("throw",1),a("return",2)}},s(e,t,r,n)}function c(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)})}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={name:"AdminUserIndex",data:function(){return{isBusy:!1,users:[],fields:[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],filters:{search:""},pagination:{currentPage:1,perPage:15,total:0},itemToDelete:{id:null,name:""}}},computed:f(f({},(0,n.L8)("auth",["user"])),{},{currentUserId:function(){return this.user?this.user.id:null}}),created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e=arguments,t=this;return u(i().m(function r(){var n,a,s,c,u;return i().w(function(r){for(;;)switch(r.p=r.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.isBusy=!0,r.p=1,a={page:n,per_page:t.pagination.perPage,search:t.filters.search},r.n=2,o.A.getAdminUsers(a);case 2:s=r.v,t.users=s.data,t.pagination.total=s.total,t.pagination.currentPage=s.current_page,r.n=4;break;case 3:r.p=3,u=r.v,console.error("Failed to fetch admin users:",u),c=u.error||"Failed to load admin users. Please try again.",t.$bvToast.toast(c,{title:"Error",variant:"danger",solid:!0}),t.users=[];case 4:return r.p=4,t.isBusy=!1,r.f(4);case 5:return r.a(2)}},r,null,[[1,3,4,5]])}))()},onPageChange:function(e){this.fetchUsers(e)},applyFilters:function(){this.pagination.currentPage=1,this.fetchUsers(1)},resetFilters:function(){this.filters.search="",this.pagination.currentPage=1,this.fetchUsers(1)},confirmDelete:function(e,t){this.itemToDelete.id=e,this.itemToDelete.name=t,this.$bvModal.show("delete-user-modal")},deleteUser:function(e){var t=this;return u(i().m(function r(){var n,a;return i().w(function(r){for(;;)switch(r.p=r.n){case 0:return e.preventDefault(),r.p=1,r.n=2,o.A.deleteAdminUser(t.itemToDelete.id);case 2:t.$bvToast.toast("Admin user '".concat(t.itemToDelete.name,"' deleted successfully."),{title:"Success",variant:"success",solid:!0}),t.fetchUsers(t.pagination.currentPage),t.$bvModal.hide("delete-user-modal"),r.n=4;break;case 3:r.p=3,a=r.v,console.error("Failed to delete admin user:",a),n=a.error||"Failed to delete admin user. Please try again.",t.$bvToast.toast(n,{title:"Error",variant:"danger",solid:!0}),t.$bvModal.hide("delete-user-modal");case 4:return r.a(2)}},r,null,[[1,3]])}))()},formatDate:function(e){return e?new Date(e).toLocaleString("id-ID"):""}}};var m=r(5072),v=r.n(m),y=r(3420),b={insert:"head",singleton:!1};v()(y.A,b);y.A.locals;const h=(0,r(4486).A)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-row",{staticClass:"mb-3"},[r("b-col",{attrs:{md:"6"}},[r("h2",[e._v("Admin User Management")])]),e._v(" "),r("b-col",{staticClass:"text-md-right",attrs:{md:"6"}},[r("b-button",{attrs:{variant:"success",to:{name:"AdminUserCreate"}}},[r("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-circle"}}),e._v("\n        Add New Admin\n      ")],1)],1)],1),e._v(" "),r("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[r("b-card-body",[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Search Admin:","label-for":"filter-user"}},[r("b-form-input",{attrs:{id:"filter-user",placeholder:"Enter name or email..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyFilters.apply(null,arguments)}},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1)],1),e._v(" "),r("b-col",{staticClass:"d-flex align-items-end",attrs:{md:"6"}},[r("b-button",{attrs:{variant:"primary"},on:{click:e.applyFilters}},[e._v("Apply Filters")]),e._v(" "),r("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:e.resetFilters}},[e._v("Reset")])],1)],1)],1)],1),e._v(" "),r("b-card",{attrs:{"no-body":""}},[r("b-table",{attrs:{striped:"",hover:"",responsive:"",items:e.users,fields:e.fields,busy:e.isBusy,"show-empty":"","empty-text":"No admin users found.","empty-filtered-text":"No admin users match your filters."},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[r("router-link",{attrs:{to:{name:"AdminUserEdit",params:{id:t.item.id}}}},[e._v("\n          "+e._s(t.item.name)+"\n        ")])]}},{key:"cell(email)",fn:function(t){return[e._v("\n        "+e._s(t.item.email)+"\n      ")]}},{key:"cell(created_at)",fn:function(t){return[e._v("\n        "+e._s(e.formatDate(t.item.created_at))+"\n      ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary",to:{name:"AdminUserEdit",params:{id:t.item.id}}}},[e._v("\n          Edit\n        ")]),e._v(" "),t.item.id!==e.currentUserId?r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.confirmDelete(t.item.id,t.item.name)}}},[e._v("\n          Delete\n        ")]):r("b-button",{attrs:{size:"sm",variant:"secondary",disabled:""}},[e._v("\n          Delete (You)\n        ")])]}}])}),e._v(" "),r("b-card-footer",{staticClass:"d-flex justify-content-between align-items-center"},[r("div",[r("strong",[e._v("Total Admins:")]),e._v(" "+e._s(e.pagination.total)+"\n      ")]),e._v(" "),r("b-pagination",{attrs:{"total-rows":e.pagination.total,"per-page":e.pagination.perPage},on:{change:e.onPageChange},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1)],1),e._v(" "),r("b-modal",{attrs:{id:"delete-user-modal",title:"Confirm Delete","ok-variant":"danger","ok-title":"Delete"},on:{ok:e.deleteUser}},[r("p",[e._v("Are you sure you want to delete admin user "),r("strong",[e._v(e._s(e.itemToDelete.name))]),e._v("?")]),e._v(" "),r("p",{staticClass:"text-danger"},[r("small",[e._v("This action cannot be undone.")])])])],1)},[],!1,null,"3a940e9e",null).exports}}]);