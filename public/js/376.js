/*! For license information please see 376.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[317,376],{1317:(t,e,r)=>{r.r(e),r.d(e,{default:()=>m});var a=r(4065);function n(){var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,a,n,i){var s=a&&a.prototype instanceof d?a:d,l=Object.create(s.prototype);return o(l,"_invoke",function(r,a,n){var o,i,s,d=0,l=n||[],u=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,r){return o=e,i=0,s=t,p.n=r,c}};function m(r,a){for(i=r,s=a,e=0;!u&&d&&!n&&e<l.length;e++){var n,o=l[e],m=p.p,f=o[2];r>3?(n=f===a)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((n=r<2&&m<o[1])?(i=0,p.v=a,p.n=o[1]):m<f&&(n=r<3||o[0]>a||a>f)&&(o[4]=r,o[5]=a,p.n=f,i=0))}if(n||r>1)return c;throw u=!0,a}return function(n,l,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&m(l,f),i=l,s=f;(e=i<2?t:s)||!u;){o||(i?i<3?(i>1&&(p.n=-1),m(i,s)):p.n=s:p.v=s);try{if(d=2,o){if(i||(n="next"),e=o[n]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=t}else if((e=(u=p.n<0)?s:r.call(a,p))!==c)break}catch(e){o=t,i=1,s=e}finally{d=1}}return{value:e,done:u}}}(r,n,i),!0),l}var c={};function d(){}function l(){}function u(){}e=Object.getPrototypeOf;var p=[][a]?e(e([][a]())):(o(e={},a,function(){return this}),e),m=u.prototype=d.prototype=Object.create(p);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,o(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t}return l.prototype=u,o(m,"constructor",u),o(u,"constructor",l),l.displayName="GeneratorFunction",o(u,i,"GeneratorFunction"),o(m),o(m,i,"Generator"),o(m,a,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:f}})()}function o(t,e,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}o=function(t,e,r,a){if(e)n?n(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r;else{var i=function(e,r){o(t,e,function(t){return this._invoke(e,r,t)})};i("next",0),i("throw",1),i("return",2)}},o(t,e,r,a)}function i(t,e,r,a,n,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(a,n)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var o=t.apply(e,r);function s(t){i(o,a,n,s,c,"next",t)}function c(t){i(o,a,n,s,c,"throw",t)}s(void 0)})}}const c={name:"OrderTimeline",data:function(){return{order:null,timeline:[],loading:!1,error:null,currentStepIndex:-1}},computed:{breadcrumbItems:function(){var t=[{text:"Dashboard",to:{name:"Dashboard"}},{text:"Orders",to:{name:"Orders"}}];return this.order&&t.push({text:"Order #".concat(this.order.order_number),to:{name:"OrderDetail",params:{id:this.$route.params.id}}}),t.push({text:"Progress",active:!0}),t},currentStep:function(){return this.currentStepIndex>=0&&this.currentStepIndex<this.timeline.length?this.timeline[this.currentStepIndex]:null}},created:function(){var t=this;return s(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadOrder();case 1:return e.n=2,t.loadTimeline();case 2:return e.a(2)}},e)}))()},methods:{loadOrder:function(){var t=this;return s(n().m(function e(){var r,o,i;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=t.$route.params.id,e.n=1,a.A.getOrder(r);case 1:o=e.v,t.order=o.data,e.n=3;break;case 2:e.p=2,i=e.v,console.warn("Failed to load order for breadcrumb:",i);case 3:return e.a(2)}},e,null,[[0,2]])}))()},loadTimeline:function(){var t=this;return s(n().m(function e(){var r,o,i;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loading=!0,t.error=null,e.p=1,r=t.$route.params.id,e.n=2,a.A.getOrderTimeline(r);case 2:o=e.v,t.timeline=o.data||[],t.determineCurrentStep(),e.n=4;break;case 3:e.p=3,i=e.v,console.error("Failed to load timeline:",i),t.error=i.message||"Failed to load order progress.";case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},determineCurrentStep:function(){for(var t=-1,e=this.timeline.length-1;e>=0;e--)if(this.timeline[e].timestamp){t=e;break}this.currentStepIndex=t},getTimelineIcon:function(t){return{created:"cart-plus",paid:"cash-coin",file_uploaded:"cloud-upload",processing:"gear",ready:"box-seam",completed:"check-circle",cancelled:"x-circle"}[t]||"question-circle"},getTimelineIconVariant:function(t){return{created:"secondary",paid:"success",file_uploaded:"info",processing:"primary",ready:"warning",completed:"success",cancelled:"danger"}[t]||"secondary"},formatDate:function(t){if(!t)return"N/A";return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}};var d=r(5072),l=r.n(d),u=r(1897),p={insert:"head",singleton:!1};l()(u.A,p);u.A.locals;const m=(0,r(4486).A)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[t.loading?r("b-row",[r("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Loading order progress...")])],1)],1):t.error?r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-alert",{attrs:{variant:"danger",show:""}},[r("h4",[r("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Error")],1),t._v(" "),r("p",[t._v(t._s(t.error))]),t._v(" "),t.order?r("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:t.$route.params.id}},variant:"primary",size:"sm"}},[r("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Order\n        ")],1):t._e(),t._v(" "),r("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary",size:"sm"}},[r("b-icon",{attrs:{icon:"list"}}),t._v(" View All Orders\n        ")],1)],1)],1)],1):t.timeline.length>0?r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-card",[r("div",{staticClass:"wizard-container"},t._l(t.timeline,function(e,a){return r("div",{key:a,class:["wizard-step",{active:a===t.currentStepIndex},{completed:a<t.currentStepIndex},{future:a>t.currentStepIndex},{"no-timestamp":!e.timestamp}]},[r("div",{staticClass:"step-line"}),t._v(" "),r("div",{staticClass:"step-icon-wrapper"},[r("div",{staticClass:"step-icon"},[r("b-icon",{attrs:{icon:t.getTimelineIcon(e.status),variant:t.getTimelineIconVariant(e.status)}})],1)]),t._v(" "),r("div",{staticClass:"step-label"},[t._v(t._s(e.label))]),t._v(" "),e.timestamp?r("div",{staticClass:"step-date text-muted small"},[t._v("\n              "+t._s(t.formatDate(e.timestamp))+"\n            ")]):r("div",{staticClass:"step-date text-muted small"},[t._v("\n              Pending\n            ")])])}),0),t._v(" "),t.currentStep?r("div",{staticClass:"current-step-detail mt-4 p-3 bg-light rounded"},[r("h4",{staticClass:"mb-2"},[r("b-icon",{staticClass:"mr-2",attrs:{icon:t.getTimelineIcon(t.currentStep.status),variant:t.getTimelineIconVariant(t.currentStep.status)}}),t._v("\n            "+t._s(t.currentStep.label)+"\n          ")],1),t._v(" "),r("p",{staticClass:"mb-1"},[t._v(t._s(t.currentStep.description))]),t._v(" "),r("small",{staticClass:"text-muted"},[r("b-icon",{attrs:{icon:"clock"}}),t._v(" "+t._s(t.formatDate(t.currentStep.timestamp))+"\n          ")],1),t._v(" "),t.currentStep.pickup_code?r("div",{staticClass:"mt-2"},[r("strong",[t._v("Pickup Code:")]),t._v(" "),r("code",{staticClass:"bg-white px-2 py-1 rounded"},[t._v(t._s(t.currentStep.pickup_code))])]):t._e()]):t._e()])],1)],1):r("b-row",[r("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[r("b-icon",{attrs:{icon:"hourglass-split","font-scale":"3",variant:"secondary"}}),t._v(" "),r("h4",{staticClass:"mt-3"},[t._v("No timeline data available.")]),t._v(" "),r("p",{staticClass:"text-muted"},[t._v("The progress for this order will be updated as it advances.")]),t._v(" "),t.order?r("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:t.$route.params.id}},variant:"primary"}},[r("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Order\n      ")],1):t._e(),t._v(" "),r("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary"}},[r("b-icon",{attrs:{icon:"list"}}),t._v(" View All Orders\n      ")],1)],1)],1)],1)},[],!1,null,"2d9809fe",null).exports},1897:(t,e,r)=>{r.d(e,{A:()=>o});var a=r(6314),n=r.n(a)()(function(t){return t[1]});n.push([t.id,'.wizard-container[data-v-2d9809fe]{display:flex;justify-content:space-between;margin:2rem 0;position:relative}.wizard-container[data-v-2d9809fe]:before{background-color:#ced4da;content:"";height:2px;left:0;position:absolute;right:0;top:20px;z-index:1}.wizard-step[data-v-2d9809fe]{align-items:center;display:flex;flex:1;flex-direction:column;padding:0 10px;position:relative;z-index:2}.step-line[data-v-2d9809fe]{background-color:#ced4da;height:2px;left:0;position:absolute;right:0;top:20px;transition:background-color .3s ease}.wizard-step:first-child .step-line[data-v-2d9809fe]{left:50%}.wizard-step:last-child .step-line[data-v-2d9809fe]{right:50%}.step-icon-wrapper[data-v-2d9809fe]{margin-bottom:.5rem;position:relative}.step-icon[data-v-2d9809fe]{align-items:center;background-color:#e9ecef;border:2px solid #ced4da;border-radius:50%;color:#6c757d;display:flex;font-size:1.2rem;height:42px;justify-content:center;transition:all .3s ease;width:42px}.step-label[data-v-2d9809fe]{font-size:.85rem;font-weight:500;margin-bottom:.25rem;transition:color .3s ease}.step-date[data-v-2d9809fe],.step-label[data-v-2d9809fe]{color:#6c757d;max-width:100px;text-align:center;word-break:break-word}.step-date[data-v-2d9809fe]{font-size:.7rem}.wizard-step.future .step-icon[data-v-2d9809fe]{background-color:#f8f9fa;border-color:#ced4da;color:#6c757d}.wizard-step.future .step-date[data-v-2d9809fe],.wizard-step.future .step-label[data-v-2d9809fe]{color:#6c757d}.wizard-step.future .step-line[data-v-2d9809fe]{background-color:#ced4da}.wizard-step.completed .step-icon[data-v-2d9809fe]{background-color:#28a745;border-color:#28a745;color:#fff}.wizard-step.completed .step-label[data-v-2d9809fe]{color:#28a745;font-weight:700}.wizard-step.completed .step-date[data-v-2d9809fe]{color:#28a745}.wizard-step.completed .step-line[data-v-2d9809fe]{background-color:#28a745}.wizard-step.active .step-icon[data-v-2d9809fe]{background-color:#007bff;border-color:#007bff;box-shadow:0 2px 4px rgba(0,0,0,.2);color:#fff;transform:scale(1.1)}.wizard-step.active .step-label[data-v-2d9809fe]{color:#007bff;font-weight:700}.wizard-step.active .step-date[data-v-2d9809fe]{color:#007bff}.wizard-step.active .step-line[data-v-2d9809fe]{background-color:#28a745}.wizard-step.no-timestamp .step-date[data-v-2d9809fe]{font-style:italic}.current-step-detail h4[data-v-2d9809fe]{margin-top:0}.current-step-detail code[data-v-2d9809fe]{font-size:1rem}@media (max-width:767.98px){.wizard-container[data-v-2d9809fe]{flex-wrap:wrap}.wizard-step[data-v-2d9809fe]{flex:0 0 50%;margin-bottom:2rem}.wizard-step[data-v-2d9809fe]:nth-child(odd){padding-right:20px}.wizard-step[data-v-2d9809fe]:nth-child(2n){padding-left:20px}.wizard-container[data-v-2d9809fe]:before{display:none}.step-label[data-v-2d9809fe]{font-size:.75rem;max-width:80px}.step-date[data-v-2d9809fe]{font-size:.65rem;max-width:80px}.step-icon[data-v-2d9809fe]{font-size:1rem;height:36px;width:36px}}@media (max-width:575.98px){.wizard-step[data-v-2d9809fe]{flex:0 0 100%;margin-bottom:1.5rem;padding:0 10px!important}.step-date[data-v-2d9809fe],.step-label[data-v-2d9809fe]{max-width:none}}',""]);const o=n},5168:(t,e,r)=>{r.d(e,{A:()=>o});var a=r(6314),n=r.n(a)()(function(t){return t[1]});n.push([t.id,".product-thumbnail[data-v-90523c48]{max-height:80px;-o-object-fit:cover;object-fit:cover}.sticky-top[data-v-90523c48]{z-index:1000}",""]);const o=n},7376:(t,e,r)=>{r.r(e),r.d(e,{default:()=>f});var a=r(4065);function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise(function(a,n){if(document.querySelector('script[src="'.concat(t,'"]')))a();else{var o=document.createElement("script");o.src=t,o.onload=a,o.onerror=n,e&&r&&o.setAttribute(e,r),document.head.appendChild(o)}})}function o(){var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function s(r,a,n,o){var s=a&&a.prototype instanceof d?a:d,l=Object.create(s.prototype);return i(l,"_invoke",function(r,a,n){var o,i,s,d=0,l=n||[],u=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,r){return o=e,i=0,s=t,p.n=r,c}};function m(r,a){for(i=r,s=a,e=0;!u&&d&&!n&&e<l.length;e++){var n,o=l[e],m=p.p,f=o[2];r>3?(n=f===a)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((n=r<2&&m<o[1])?(i=0,p.v=a,p.n=o[1]):m<f&&(n=r<3||o[0]>a||a>f)&&(o[4]=r,o[5]=a,p.n=f,i=0))}if(n||r>1)return c;throw u=!0,a}return function(n,l,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&m(l,f),i=l,s=f;(e=i<2?t:s)||!u;){o||(i?i<3?(i>1&&(p.n=-1),m(i,s)):p.n=s:p.v=s);try{if(d=2,o){if(i||(n="next"),e=o[n]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=t}else if((e=(u=p.n<0)?s:r.call(a,p))!==c)break}catch(e){o=t,i=1,s=e}finally{d=1}}return{value:e,done:u}}}(r,n,o),!0),l}var c={};function d(){}function l(){}function u(){}e=Object.getPrototypeOf;var p=[][a]?e(e([][a]())):(i(e={},a,function(){return this}),e),m=u.prototype=d.prototype=Object.create(p);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,i(t,n,"GeneratorFunction")),t.prototype=Object.create(m),t}return l.prototype=u,i(m,"constructor",u),i(u,"constructor",l),l.displayName="GeneratorFunction",i(u,n,"GeneratorFunction"),i(m),i(m,n,"Generator"),i(m,a,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:f}})()}function i(t,e,r,a){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}i=function(t,e,r,a){if(e)n?n(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r;else{var o=function(e,r){i(t,e,function(t){return this._invoke(e,r,t)})};o("next",0),o("throw",1),o("return",2)}},i(t,e,r,a)}function s(t,e,r,a,n,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var o=t.apply(e,r);function i(t){s(o,a,n,i,c,"next",t)}function c(t){s(o,a,n,i,c,"throw",t)}i(void 0)})}}const d={name:"OrderDetail",components:{OrderTimeline:r(1317).default},data:function(){return{order:null,loading:!1,error:null,paymentError:null,isCancelling:!1,cancelError:null,isPaying:!1,snapToken:null}},computed:{breadcrumbItems:function(){return[{text:"Dashboard",to:{name:"Dashboard"}},{text:"Orders",to:{name:"Orders"}},{text:"Order #".concat(this.order?this.order.order_number:"..."),active:!0}]}},created:function(){var t=this;return c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadOrder();case 1:return e.a(2)}},e)}))()},methods:{cancelOrder:function(){var t=this;return c(o().m(function e(){var r;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.order){e.n=1;break}return e.a(2);case 1:if(window.confirm("Are you sure you want to cancel order #".concat(t.order.order_number,"? This action cannot be undone."))){e.n=2;break}return e.a(2);case 2:return t.isCancelling=!0,t.cancelError=null,e.p=3,e.n=4,a.A.cancelOrder(t.order.id);case 4:return t.$store.dispatch("showNotification",{title:"Order Cancelled",message:"Order #".concat(t.order.order_number," has been cancelled."),type:"success"}),e.n=5,t.loadOrder();case 5:e.n=7;break;case 6:e.p=6,r=e.v,console.error("Failed to cancel order:",r),t.cancelError=r.message||"Failed to cancel order. Please try again.",t.$store.dispatch("showNotification",{title:"Cancellation Failed",message:t.cancelError,type:"danger"});case 7:return e.p=7,t.isCancelling=!1,e.f(7);case 8:return e.a(2)}},e,null,[[3,6,7,8]])}))()},loadOrder:function(){var t=this;return c(o().m(function e(){var r,n,i;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loading=!0,t.error=null,t.paymentError=null,e.p=1,r=t.$route.params.id,e.n=2,a.A.getOrder(r);case 2:n=e.v,t.order=n.data,t.order.snap_token?t.snapToken=t.order.snap_token:t.order.payment&&t.order.payment.snap_token&&(t.snapToken=t.order.payment.snap_token),e.n=4;break;case 3:e.p=3,i=e.v,console.error("Failed to load order:",i),t.error=i.message||"Failed to load order details. Please try again.";case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},initiatePayment:function(){var t=this;return c(o().m(function e(){var r,a,i;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.snapToken){e.n=1;break}return t.paymentError="Payment token is missing. Please try refreshing the page or contact support.",console.error("Snap token is missing for order:",null===(r=t.order)||void 0===r?void 0:r.id),e.a(2);case 1:if(t.isPaying=!0,t.paymentError=null,e.p=2,a="SB-Mid-client-ZyXv2oYyVPIwee9e"){e.n=3;break}throw new Error("MIDTRANS_CLIENT_KEY is not configured in .env file.");case 3:return e.n=4,n("https://app.sandbox.midtrans.com/snap/snap.js","data-client-key",a);case 4:if(void 0!==window.snap){e.n=5;break}throw new Error("Failed to load Midtrans Snap.js. Please check your internet connection and try again.");case 5:window.snap.pay(t.snapToken,{onSuccess:function(e){console.log("Payment Success:",e),t.handlePaymentOutcome("success",e)},onPending:function(e){console.log("Payment Pending:",e),t.handlePaymentOutcome("pending",e)},onError:function(e){console.error("Payment Error:",e),t.handlePaymentOutcome("error",e)},onClose:function(){console.log("Payment Popup Closed"),t.isPaying=!1,t.loadOrder()}}),e.n=7;break;case 6:e.p=6,i=e.v,console.error("Failed to initiate Snap payment:",i),t.paymentError=i.message||"Failed to open payment page. Please try again.",t.isPaying=!1;case 7:return e.a(2)}},e,null,[[2,6]])}))()},handlePaymentOutcome:function(t,e){var r=this;this.isPaying=!1;var a={title:"",message:"",type:""};"success"===t?(a={title:"Payment Successful",message:"Your payment has been processed successfully. Redirecting...",type:"success"},setTimeout(c(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.loadOrder();case 1:return t.a(2)}},t)})),2e3)):"pending"===t?(a={title:"Payment Pending",message:e.status_message||"Your payment is being processed. We will notify you once it is confirmed.",type:"warning"},setTimeout(c(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.loadOrder();case 1:return t.a(2)}},t)})),2e3)):"error"===t&&(a={title:"Payment Error",message:e.status_message||"An error occurred during payment. Please try again or check your transaction history.",type:"danger"}),a.title&&this.$store.dispatch("showNotification",a)},getStatusVariant:function(t){return{pending:"warning",paid:"success",file_upload:"info",processing:"primary",ready:"success",completed:"success",cancelled:"danger"}[t]||"secondary"},formatStatus:function(t){return{pending:"Pending Payment",paid:"Payment Received",file_upload:"Awaiting Files",processing:"In Production",ready:"Ready for Pickup",completed:"Completed",cancelled:"Cancelled"}[t]||t},formatDate:function(t){if(!t)return"N/A";return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatCurrency:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},getProductImage:function(t){return t&&t.thumbnail?(t.thumbnail.startsWith("http"),t.thumbnail):"https://www.aaronfaber.com/wp-content/uploads/2017/03/product-placeholder-wp.jpg"},onItemImageError:function(t){t.target.src="https://www.aaronfaber.com/wp-content/uploads/2017/03/product-placeholder-wp.jpg"}}};var l=r(5072),u=r.n(l),p=r(5168),m={insert:"head",singleton:!1};u()(p.A,m);p.A.locals;const f=(0,r(4486).A)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("app-layout",[r("b-container",[t.loading?r("b-row",[r("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Loading order details...")])],1)],1):t.error?r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-alert",{attrs:{variant:"danger",show:""}},[r("h4",[r("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Error")],1),t._v(" "),r("p",[t._v(t._s(t.error))]),t._v(" "),r("b-button",{attrs:{variant:"primary",to:{name:"Orders"},size:"sm"}},[r("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Orders\n            ")],1)],1)],1)],1):t.order?r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-breadcrumb",{attrs:{items:t.breadcrumbItems}})],1),t._v(" "),r("b-col",{attrs:{lg:"8"}},[r("b-card",{staticClass:"mb-4"},[r("b-card-title",[r("b-icon",{attrs:{icon:"receipt"}}),t._v(" Order Summary #"+t._s(t.order.order_number)+"\n              "),r("b-badge",{staticClass:"ml-2",attrs:{variant:t.getStatusVariant(t.order.status)}},[t._v("\n                "+t._s(t.formatStatus(t.order.status))+"\n              ")])],1),t._v(" "),r("b-row",[r("b-col",{attrs:{md:"6"}},[r("p",{staticClass:"mb-1"},[r("strong",[t._v("Date:")]),t._v(" "+t._s(t.formatDate(t.order.created_at)))]),t._v(" "),r("p",{staticClass:"mb-1"},[r("strong",[t._v("Total Amount:")]),t._v(" "),r("strong",[t._v(t._s(t.formatCurrency(t.order.total_amount)))])])]),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("p",{staticClass:"mb-1"},[r("strong",[t._v("Name:")]),t._v(" "+t._s(t.order.customer_name))]),t._v(" "),r("p",{staticClass:"mb-1"},[r("strong",[t._v("Email:")]),t._v(" "+t._s(t.order.customer_email))])])],1)],1),t._v(" "),r("b-card",{staticClass:"mb-4"},[r("b-card-title",[r("b-icon",{attrs:{icon:"kanban"}}),t._v(" Order Progress"),t.order?r("span",[t._v("#"+t._s(t.order.order_number))]):t._e()],1),t._v(" "),r("OrderTimeline")],1),t._v(" "),r("b-card",{staticClass:"mb-4"},[r("b-card-title",[r("b-icon",{attrs:{icon:"list"}}),t._v(" Order Items")],1),t._v(" "),r("b-list-group",{attrs:{flush:""}},t._l(t.order.items,function(e){return r("b-list-group-item",{key:e.id},[r("b-row",{staticClass:"align-items-center"},[r("b-col",{staticClass:"text-center mb-2 mb-md-0",attrs:{md:"2"}},[r("b-img",{staticClass:"product-thumbnail",attrs:{src:t.getProductImage(e.product),rounded:"",fluid:""},on:{error:t.onItemImageError}})],1),t._v(" "),r("b-col",{attrs:{md:"6"}},[r("h6",{staticClass:"mb-1"},[t._v(t._s(e.product?e.product.name:"No Product"))]),t._v(" "),r("p",{staticClass:"text-muted small mb-0"},[t._v("\n                      Template: "+t._s(e.template?e.template.name:"N/A")),r("br"),t._v("\n                      Qty: "+t._s(e.quantity)+" × "+t._s(t.formatCurrency(e.price))+"\n                      "),e.design_same?t._e():r("span",[t._v("(Different designs)")])])]),t._v(" "),r("b-col",{staticClass:"text-md-right",attrs:{md:"4"}},[r("strong",[t._v(" "+t._s(t.formatCurrency(e.quantity*e.price)))])])],1)],1)}),1)],1),t._v(" "),r("b-card",{staticClass:"mb-4"},[r("b-card-title",[r("b-icon",{attrs:{icon:"geo-alt"}}),t._v(" Shipping Address")],1),t._v(" "),r("address",{staticClass:"mb-0"},[r("strong",[t._v(t._s(t.order.customer_name))]),r("br"),t._v("\n              "+t._s(t.order.customer_address)),r("br"),t._v("\n              "+t._s(t.order.customer_city)+", "+t._s(t.order.customer_postal_code)),r("br")])],1)],1),t._v(" "),r("b-col",{attrs:{lg:"4"}},[r("b-card",{staticClass:"sticky-top",staticStyle:{top:"20px"}},[r("b-card-title",[r("b-icon",{attrs:{icon:"credit-card"}}),t._v(" Payment & Actions")],1),t._v(" "),t.paymentError?r("b-alert",{staticClass:"mb-3",attrs:{variant:"danger",dismissible:""},on:{dismissed:function(e){t.paymentError=""}}},[t._v("\n              "+t._s(t.paymentError)+"\n            ")]):t._e(),t._v(" "),r("hr"),t._v(" "),t.order&&"pending"===t.order.status?r("b-button",{staticClass:"mb-2",attrs:{variant:"outline-danger",block:"",size:"sm",disabled:t.isCancelling},on:{click:t.cancelOrder}},[t.isCancelling?r("b-spinner",{attrs:{small:""}}):t._e(),t._v("\n "+t._s(t.isCancelling?"Cancelling...":"Cancel Order")+"\n")],1):t._e(),t._v(" "),"pending"===t.order.status&&t.snapToken?r("div",[r("p",{staticClass:"text-muted small mb-2"},[t._v("Complete your payment to proceed with your order.")]),t._v(" "),r("b-button",{staticClass:"mb-2",attrs:{variant:"success",size:"lg",block:"",disabled:t.isPaying},on:{click:t.initiatePayment}},[t.isPaying?r("b-spinner",{attrs:{small:""}}):t._e(),t._v("\n                "+t._s(t.isPaying?"Opening Payment...":"Pay Now ( "+t.formatCurrency(t.order.total_amount)+")")+"\n              ")],1),t._v(" "),r("p",{staticClass:"text-muted small mb-0"},[r("b-icon",{attrs:{icon:"info-circle"}}),t._v(" You will be redirected to Midtrans secure payment page.")],1)],1):"pending"!==t.order.status||t.snapToken?"paid"===t.order.status?r("div",[r("b-alert",{staticClass:"mb-3",attrs:{variant:"success",show:""}},[r("b-icon",{attrs:{icon:"check-circle"}}),t._v(" "),r("strong",[t._v("Payment Successful!")]),r("br"),t._v(" "),r("small",{staticClass:"text-muted"},[t._v("Paid on "+t._s(t.formatDate(t.order.paid_at)))])],1),t._v(" "),r("p",{staticClass:"mb-2"},[t._v("Thank you for your payment. You can now upload your design files.")]),t._v(" "),r("b-button",{staticClass:"mb-2",attrs:{variant:"primary",to:{name:"FileUpload",params:{id:t.order.id}},block:""}},[r("b-icon",{attrs:{icon:"cloud-upload"}}),t._v(" Upload Design Files\n              ")],1)],1):"cancelled"===t.order.status?r("div",[r("b-alert",{staticClass:"mb-3",attrs:{variant:"danger",show:""}},[r("b-icon",{attrs:{icon:"x-circle"}}),t._v(" "),r("strong",[t._v("Order Cancelled")]),r("br"),t._v(" "),t.order.cancelled_at?r("small",{staticClass:"text-muted"},[t._v("Cancelled on "+t._s(t.formatDate(t.order.cancelled_at)))]):t._e()],1),t._v(" "),r("p",{staticClass:"mb-2"},[t._v("Your order has been cancelled. If you have any questions, please contact support.")])],1):r("div",[r("b-alert",{staticClass:"mb-3",attrs:{variant:t.getStatusVariant(t.order.status),show:""}},[r("strong",[t._v(t._s(t.formatStatus(t.order.status)))])]),t._v(" "),r("p",{staticClass:"mb-2"},[t._v("Your order is currently in the "),r("strong",[t._v(t._s(t.formatStatus(t.order.status)))]),t._v(" status.")]),t._v(" "),"file_upload"===t.order.status?r("div",[r("b-button",{staticClass:"mb-2",attrs:{variant:"primary",to:{name:"FileUpload",params:{id:t.order.id}},block:""}},[r("b-icon",{attrs:{icon:"cloud-upload"}}),t._v(" Upload Design Files\n                  ")],1)],1):t._e()],1):r("div",[r("b-alert",{staticClass:"mb-3",attrs:{variant:"warning",show:""}},[t._v("\n                Payment information is not available. Please contact support or try refreshing the page.\n              ")])],1),t._v(" "),r("hr"),t._v(" "),r("b-button",{staticClass:"mb-2",attrs:{variant:"outline-primary",block:"",size:"sm",to:{name:"Orders"}}},[r("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Orders\n            ")],1)],1)],1)],1):t._e()],1)],1)},[],!1,null,"90523c48",null).exports}}]);