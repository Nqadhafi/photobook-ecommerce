/*! For license information please see 509.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[509,664],{176:(t,e,a)=>{a.d(e,{A:()=>i});var r=a(6314),n=a.n(r)()(function(t){return t[1]});n.push([t.id,".product-thumbnail[data-v-4611d945]{max-height:80px;-o-object-fit:cover;object-fit:cover}.sticky-card[data-v-4611d945]{position:sticky;top:20px;z-index:1}@media (max-width:991.98px){.sticky-card[data-v-4611d945]{position:static;top:auto}}",""]);const i=n},4664:(t,e,a)=>{a.r(e),a.d(e,{default:()=>m});var r=a(4065);function n(){var t,e,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function s(a,r,n,o){var s=r&&r.prototype instanceof l?r:l,d=Object.create(s.prototype);return i(d,"_invoke",function(a,r,n){var i,o,s,l=0,d=n||[],u=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,a){return i=e,o=0,s=t,p.n=a,c}};function m(a,r){for(o=a,s=r,e=0;!u&&l&&!n&&e<d.length;e++){var n,i=d[e],m=p.p,v=i[2];a>3?(n=v===r)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=m&&((n=a<2&&m<i[1])?(o=0,p.v=r,p.n=i[1]):m<v&&(n=a<3||i[0]>r||r>v)&&(i[4]=a,i[5]=r,p.n=v,o=0))}if(n||a>1)return c;throw u=!0,r}return function(n,d,v){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,v),o=d,s=v;(e=o<2?t:s)||!u;){i||(o?o<3?(o>1&&(p.n=-1),m(o,s)):p.n=s:p.v=s);try{if(l=2,i){if(o||(n="next"),e=i[n]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,o<2&&(o=0)}else 1===o&&(e=i.return)&&e.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),o=1);i=t}else if((e=(u=p.n<0)?s:a.call(r,p))!==c)break}catch(e){i=t,o=1,s=e}finally{l=1}}return{value:e,done:u}}}(a,n,o),!0),d}var c={};function l(){}function d(){}function u(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),m=u.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,i(t,o,"GeneratorFunction")),t.prototype=Object.create(m),t}return d.prototype=u,i(m,"constructor",u),i(u,"constructor",d),d.displayName="GeneratorFunction",i(u,o,"GeneratorFunction"),i(m),i(m,o,"Generator"),i(m,r,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:v}})()}function i(t,e,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}i=function(t,e,a,r){if(e)n?n(t,e,{value:a,enumerable:!r,configurable:!r,writable:!r}):t[e]=a;else{var o=function(e,a){i(t,e,function(t){return this._invoke(e,a,t)})};o("next",0),o("throw",1),o("return",2)}},i(t,e,a,r)}function o(t,e,a,r,n,i,o){try{var s=t[i](o),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(r,n)}function s(t){return function(){var e=this,a=arguments;return new Promise(function(r,n){var i=t.apply(e,a);function s(t){o(i,r,n,s,c,"next",t)}function c(t){o(i,r,n,s,c,"throw",t)}s(void 0)})}}const c={name:"OrderTimeline",data:function(){return{order:null,rawTimeline:[],timeline:[],loading:!1,error:null,currentStepIndex:-1,cancelIndex:-1,pickupCode:null}},created:function(){var t=this;return s(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadOrder();case 1:return e.n=2,t.loadTimeline();case 2:return e.a(2)}},e)}))()},computed:{isCancelled:function(){return this.timeline.some(function(t){return"cancelled"===t.status&&t.timestamp})},currentStep:function(){return this.currentStepIndex>=0&&this.currentStepIndex<this.timeline.length?this.timeline[this.currentStepIndex]:null}},methods:{loadOrder:function(){var t=this;return s(n().m(function e(){var a,i,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=t.$route.params.id,e.n=1,r.A.getOrder(a);case 1:i=e.v,t.order=i.data,t.pickupCode=t.order&&t.order.pickup_code?t.order.pickup_code:null,e.n=3;break;case 2:e.p=2,o=e.v,console.warn("loadOrder (optional) failed:",o);case 3:return e.a(2)}},e,null,[[0,2]])}))()},loadTimeline:function(){var t=this;return s(n().m(function e(){var a,i,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loading=!0,t.error=null,e.p=1,a=t.$route.params.id,e.n=2,r.A.getOrderTimeline(a);case 2:i=e.v,t.rawTimeline=Array.isArray(i.data)?i.data:[],t.timeline=t.normalizeTimeline(t.rawTimeline,t.order),t.computeCurrentIndex(),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Failed to load timeline:",o),t.error=(null==o?void 0:o.message)||"Failed to load order progress.";case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},normalizeTimeline:function(t,e){var a={created:"pending",pending:"pending",paid:"paid",file_uploaded:"file_upload",file_upload:"file_upload",processing:"processing",ready:"ready",completed:"completed",cancelled:"cancelled"},r={};t.forEach(function(t){var e=a[(t.status||"").toLowerCase()]||"pending",n=t.timestamp||t.updated_at||t.created_at||null;(!r[e]||n&&new Date(n)>new Date(r[e]))&&(r[e]=n)}),e&&(e.created_at&&!r.pending&&(r.pending=e.created_at),e.paid_at&&!r.paid&&(r.paid=e.paid_at),"file_upload"!==e.status&&!e.file_upload_at||r.file_upload||(r.file_upload=e.file_upload_at||e.updated_at||null),"processing"!==e.status&&!e.processing_at||r.processing||(r.processing=e.processing_at||e.updated_at||null),"ready"!==e.status&&!e.ready_at||r.ready||(r.ready=e.ready_at||e.updated_at||null),"completed"!==e.status&&!e.completed_at||r.completed||(r.completed=e.completed_at||e.updated_at||null));var n=null,i=t.find(function(t){return"cancelled"===a[(t.status||"").toLowerCase()]});i?n=i.timestamp||i.updated_at||i.created_at||null:e&&"cancelled"===e.status&&(n=e.cancelled_at||e.updated_at||null);var o=["pending","paid","file_upload","processing","ready","completed"].map(function(t){return{status:t,timestamp:r[t]||null}});return n&&o.push({status:"cancelled",timestamp:n}),o},computeCurrentIndex:function(){var t=this.timeline.findIndex(function(t){return"cancelled"===t.status&&t.timestamp});if(-1!==t)return this.currentStepIndex=t,void(this.cancelIndex=t);for(var e=-1,a=0;a<this.timeline.length;a++)this.timeline[a].timestamp&&(e=a);this.currentStepIndex=e},getLabel:function(t){return{pending:"Menunggu Pembayaran",paid:"Pembayaran Diterima",file_upload:"Upload File Anda",processing:"Sedang Diproduksi",ready:"Siap Diambil",completed:"Selesai",cancelled:"Dibatalkan"}[t]||t},getDescription:function(t){return{pending:"Pesanan berhasil dibuat, menunggu pembayaran.",paid:"Pembayaran diterima. Sedang menyiapkan folder upload.",file_upload:"Link Google Drive Siap, Silahkan Upload File Anda.",processing:"Pesanan sedang diproduksi.",ready:"Pesanan siap diambil..",completed:"Pesanan telah selesai. Terima kasih!",cancelled:"Pesanan dibatalkan."}[t]||""},getIcon:function(t){return{pending:"cart-plus",paid:"cash-coin",file_upload:"cloud-upload",processing:"gear",ready:"box-seam",completed:"check-circle",cancelled:"x-circle"}[t]||"question-circle"},getVariant:function(t){return{pending:"warning",paid:"info",file_upload:"primary",processing:"primary",ready:"warning",completed:"success",cancelled:"danger"}[t]||"secondary"},formatDate:function(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"N/A"}}}};var l=a(5072),d=a.n(l),u=a(7768),p={insert:"head",singleton:!1};d()(u.A,p);u.A.locals;const m=(0,a(4486).A)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[t.loading?a("b-row",[a("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[a("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),t._v(" "),a("p",{staticClass:"mt-3"},[t._v("Loading order progress...")])],1)],1):t.error?a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-alert",{attrs:{variant:"danger",show:""}},[a("h4",[a("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Error")],1),t._v(" "),a("p",{staticClass:"mb-3"},[t._v(t._s(t.error))]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap gap-2"},[t.order?a("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:t.$route.params.id}},variant:"primary",size:"sm"}},[a("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Kembali ke Pesanan\n          ")],1):t._e(),t._v(" "),a("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary",size:"sm"}},[a("b-icon",{attrs:{icon:"list"}}),t._v(" Lihat Semua Pesanan\n          ")],1)],1)])],1)],1):t.timeline.length?a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-card",{staticClass:"border-0 shadow-sm"},[a("div",{staticClass:"wizard-container"},t._l(t.timeline,function(e,r){return a("div",{key:e.status,class:["wizard-step",{completed:r<t.currentStepIndex},{active:r===t.currentStepIndex},{future:r>t.currentStepIndex},{cancelled:t.isCancelled&&r!==t.cancelIndex}]},[a("div",{staticClass:"step-line"}),t._v(" "),a("div",{staticClass:"step-icon-wrapper"},[a("div",{staticClass:"step-icon",class:"ico-"+e.status},[a("b-icon",{attrs:{icon:t.getIcon(e.status)}})],1)]),t._v(" "),a("div",{staticClass:"step-label"},[t._v(t._s(t.getLabel(e.status)))]),t._v(" "),e.timestamp?a("div",{staticClass:"step-date text-muted small"},[t._v("\n              "+t._s(t.formatDate(e.timestamp))+"\n            ")]):a("div",{staticClass:"step-date text-muted small"},[t._v("Pending")])])}),0),t._v(" "),t.currentStep?a("div",{staticClass:"current-step-detail mt-4 p-3 bg-light rounded"},[a("h5",{staticClass:"mb-2 d-flex align-items-center"},[a("b-icon",{class:"mr-2 text-"+t.getVariant(t.currentStep.status),attrs:{icon:t.getIcon(t.currentStep.status)}}),t._v("\n            "+t._s(t.getLabel(t.currentStep.status))+"\n          ")],1),t._v(" "),a("p",{staticClass:"mb-1"},[t._v(t._s(t.getDescription(t.currentStep.status)))]),t._v(" "),a("small",{staticClass:"text-muted d-block mb-2"},[a("b-icon",{attrs:{icon:"clock"}}),t._v("\n            "+t._s(t.currentStep.timestamp?t.formatDate(t.currentStep.timestamp):"Waiting to be updated")+"\n          ")],1),t._v(" "),!t.pickupCode||"ready"!==t.currentStep.status&&"completed"!==t.currentStep.status?t._e():a("div",{staticClass:"mt-2"},[a("strong",[t._v("Pickup Code:")]),t._v(" "),a("code",{staticClass:"bg-white px-2 py-1 rounded"},[t._v(t._s(t.pickupCode))])]),t._v(" "),t.isCancelled?a("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:"",variant:"danger"}},[a("b-icon",{attrs:{icon:"x-circle"}}),t._v("\n            Order telah "),a("strong",[t._v("dibatalkan")]),t._v(".\n          ")],1):t._e()],1):t._e()])],1)],1):a("b-row",[a("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[a("b-icon",{attrs:{icon:"hourglass-split","font-scale":"3",variant:"secondary"}}),t._v(" "),a("h4",{staticClass:"mt-3"},[t._v("No timeline available.")]),t._v(" "),a("p",{staticClass:"text-muted"},[t._v("Progress pesanan akan segera ditampilkan.")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center gap-2"},[t.order?a("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:t.$route.params.id}},variant:"primary"}},[a("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Kembali ke Pesanan\n        ")],1):t._e(),t._v(" "),a("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary"}},[a("b-icon",{attrs:{icon:"list"}}),t._v(" Lihat Semua Pesanan\n        ")],1)],1)],1)],1)],1)},[],!1,null,"ce9759ec",null).exports},7509:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var r=a(4065);function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise(function(r,n){if(document.querySelector('script[src="'.concat(t,'"]')))r();else{var i=document.createElement("script");i.src=t,i.onload=r,i.onerror=n,e&&a&&i.setAttribute(e,a),document.head.appendChild(i)}})}function i(){var t,e,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function s(a,r,n,i){var s=r&&r.prototype instanceof l?r:l,d=Object.create(s.prototype);return o(d,"_invoke",function(a,r,n){var i,o,s,l=0,d=n||[],u=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,a){return i=e,o=0,s=t,p.n=a,c}};function m(a,r){for(o=a,s=r,e=0;!u&&l&&!n&&e<d.length;e++){var n,i=d[e],m=p.p,v=i[2];a>3?(n=v===r)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=m&&((n=a<2&&m<i[1])?(o=0,p.v=r,p.n=i[1]):m<v&&(n=a<3||i[0]>r||r>v)&&(i[4]=a,i[5]=r,p.n=v,o=0))}if(n||a>1)return c;throw u=!0,r}return function(n,d,v){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,v),o=d,s=v;(e=o<2?t:s)||!u;){i||(o?o<3?(o>1&&(p.n=-1),m(o,s)):p.n=s:p.v=s);try{if(l=2,i){if(o||(n="next"),e=i[n]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,o<2&&(o=0)}else 1===o&&(e=i.return)&&e.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),o=1);i=t}else if((e=(u=p.n<0)?s:a.call(r,p))!==c)break}catch(e){i=t,o=1,s=e}finally{l=1}}return{value:e,done:u}}}(a,n,i),!0),d}var c={};function l(){}function d(){}function u(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(o(e={},r,function(){return this}),e),m=u.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,o(t,n,"GeneratorFunction")),t.prototype=Object.create(m),t}return d.prototype=u,o(m,"constructor",u),o(u,"constructor",d),d.displayName="GeneratorFunction",o(u,n,"GeneratorFunction"),o(m),o(m,n,"Generator"),o(m,r,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:v}})()}function o(t,e,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}o=function(t,e,a,r){if(e)n?n(t,e,{value:a,enumerable:!r,configurable:!r,writable:!r}):t[e]=a;else{var i=function(e,a){o(t,e,function(t){return this._invoke(e,a,t)})};i("next",0),i("throw",1),i("return",2)}},o(t,e,a,r)}function s(t,e,a,r,n,i,o){try{var s=t[i](o),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(r,n)}function c(t){return function(){var e=this,a=arguments;return new Promise(function(r,n){var i=t.apply(e,a);function o(t){s(i,r,n,o,c,"next",t)}function c(t){s(i,r,n,o,c,"throw",t)}o(void 0)})}}const l={name:"OrderDetail",components:{OrderTimeline:a(4664).default},data:function(){return{order:null,loading:!1,error:null,paymentError:null,isCancelling:!1,cancelError:null,isPaying:!1,snapToken:null,defaultPickupLocation:{name:"Shabat Printing",address_line:"Jl. Perintis Kemerdekaan No 20C-D, Sondakan, Laweyan",city:"Surakarta",postal_code:"12345",open_hours:"Senin–Sabtu 09.00–18.00",phone:"+6285601367643",whatsapp:"6285601367643",maps_url:"https://maps.app.goo.gl/3bwQUdssE2EuhVe9A"}}},computed:{breadcrumbItems:function(){return[{text:"Dashboard",to:{name:"Dashboard"}},{text:"Orders",to:{name:"Orders"}},{text:"Order #".concat(this.order?this.order.order_number:"..."),active:!0}]},pickupInfo:function(){var t=this.order&&this.order.pickup_location?this.order.pickup_location:{};return{name:t.name||this.defaultPickupLocation.name,address_line:t.address_line||this.defaultPickupLocation.address_line,city:t.city||this.defaultPickupLocation.city,postal_code:t.postal_code||this.defaultPickupLocation.postal_code,open_hours:t.open_hours||this.defaultPickupLocation.open_hours,phone:t.phone||this.defaultPickupLocation.phone,whatsapp:t.whatsapp||this.defaultPickupLocation.whatsapp,maps_url:t.maps_url||this.defaultPickupLocation.maps_url}}},created:function(){var t=this;return c(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadOrder();case 1:return e.a(2)}},e)}))()},methods:{cancelOrder:function(){var t=this;return c(i().m(function e(){var a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.order){e.n=1;break}return e.a(2);case 1:if(window.confirm("Batalkan pesanan #".concat(t.order.order_number,"?"))){e.n=2;break}return e.a(2);case 2:return t.isCancelling=!0,t.cancelError=null,e.p=3,e.n=4,r.A.cancelOrder(t.order.id);case 4:return t.$store.dispatch("showNotification",{title:"Order Cancelled",message:"Pesanan #".concat(t.order.order_number," telah dibatalkan."),type:"success"}),e.n=5,t.loadOrder();case 5:e.n=7;break;case 6:e.p=6,a=e.v,console.error("Failed to cancel order:",a),t.cancelError=a.message||"Tidak bisa membatalkan order. Silahkan coba lagi.",t.$store.dispatch("showNotification",{title:"Cancellation Failed",message:t.cancelError,type:"danger"});case 7:return e.p=7,t.isCancelling=!1,e.f(7);case 8:return e.a(2)}},e,null,[[3,6,7,8]])}))()},loadOrder:function(){var t=this;return c(i().m(function e(){var a,n,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loading=!0,t.error=null,t.paymentError=null,e.p=1,a=t.$route.params.id,e.n=2,r.A.getOrder(a);case 2:n=e.v,t.order=n.data,t.order.snap_token?t.snapToken=t.order.snap_token:t.order.payment&&t.order.payment.snap_token&&(t.snapToken=t.order.payment.snap_token),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Failed to load order:",o),t.error=o.message||"Failed to load order details. Please try again.";case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},initiatePayment:function(){var t=this;return c(i().m(function e(){var a,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.snapToken){e.n=1;break}return t.paymentError="Payment token is missing. Please refresh or contact support.",e.a(2);case 1:if(t.isPaying=!0,t.paymentError=null,e.p=2,a="SB-Mid-client-ZyXv2oYyVPIwee9e"){e.n=3;break}throw new Error("MIDTRANS_CLIENT_KEY is not configured in .env");case 3:return e.n=4,n("https://app.sandbox.midtrans.com/snap/snap.js","data-client-key",a);case 4:if(void 0!==window.snap){e.n=5;break}throw new Error("Failed to load Midtrans Snap.js. Check your connection.");case 5:window.snap.pay(t.snapToken,{onSuccess:function(e){return t.handlePaymentOutcome("success",e)},onPending:function(e){return t.handlePaymentOutcome("pending",e)},onError:function(e){return t.handlePaymentOutcome("error",e)},onClose:function(){t.isPaying=!1,t.loadOrder()}}),e.n=7;break;case 6:e.p=6,r=e.v,console.error("Failed to initiate payment:",r),t.paymentError=r.message||"Failed to open payment page. Please try again.",t.isPaying=!1;case 7:return e.a(2)}},e,null,[[2,6]])}))()},handlePaymentOutcome:function(t,e){var a,r=this;this.isPaying=!1,"success"===t?(a={title:"Payment Successful",message:"Pembayaran Berhasil.",type:"success"},setTimeout(function(){return r.loadOrder()},1200)):"pending"===t?(a={title:"Payment Pending",message:e.status_message||"Pembayaran diproses.",type:"warning"},setTimeout(function(){return r.loadOrder()},1200)):a={title:"Payment Error",message:e.status_message||"An error occurred during payment.",type:"danger"},this.$store.dispatch("showNotification",a)},getStatusVariant:function(t){return{pending:"warning",paid:"info",file_upload:"success",processing:"primary",ready:"success",completed:"success",cancelled:"danger"}[t]||"secondary"},formatStatus:function(t){return{pending:"Menunggu Pembayaran",paid:"Pembayaran Diterima",file_upload:"Upload File Anda",processing:"Sedang Diproduksi",ready:"Siap Diambil",completed:"Selesai",cancelled:"Dibatalkan"}[t]||t},formatDate:function(t){if(!t)return"N/A";return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatCurrency:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t||0)},getProductImage:function(t){return t&&t.thumbnail?(t.thumbnail.startsWith("http"),t.thumbnail):"https://www.aaronfaber.com/wp-content/uploads/2017/03/product-placeholder-wp.jpg"},onItemImageError:function(t){t.target.src="https://www.aaronfaber.com/wp-content/uploads/2017/03/product-placeholder-wp.jpg"},getTotalPhotoSlotsForItem:function(t){if(!t.template||!t.template.layout_data)return null;var e=t.template.layout_data.photo_slots;return null==e?null:e*(t.design_same?1:t.quantity)},formatPhoneToWa:function(t){var e=(t||"").replace(/\D/g,"");return e.startsWith("0")?"62"+e.slice(1):e},copyPickupCode:function(){var t=this;return c(i().m(function e(){var a,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.order&&t.order.pickup_code){e.n=1;break}return e.a(2);case 1:if(a=t.order.pickup_code.toString(),e.p=2,!navigator.clipboard||!navigator.clipboard.writeText){e.n=4;break}return e.n=3,navigator.clipboard.writeText(a);case 3:e.n=5;break;case 4:(r=document.createElement("textarea")).value=a,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r);case 5:t.$store.dispatch("showNotification",{title:"Copied",message:"Pickup code disalin ke papan klip.",type:"success"}),e.n=7;break;case 6:e.p=6,e.v,t.$store.dispatch("showNotification",{title:"Copy Failed",message:"Unable to copy pickup code. Please copy manually.",type:"danger"});case 7:return e.a(2)}},e,null,[[2,6]])}))()}}};var d=a(5072),u=a.n(d),p=a(176),m={insert:"head",singleton:!1};u()(p.A,m);p.A.locals;const v=(0,a(4486).A)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",[a("b-container",[t.loading?a("b-row",[a("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[a("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),t._v(" "),a("p",{staticClass:"mt-3"},[t._v("Loading order details...")])],1)],1):t.error?a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-alert",{attrs:{variant:"danger",show:""}},[a("h4",[a("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Error")],1),t._v(" "),a("p",[t._v(t._s(t.error))]),t._v(" "),a("b-button",{attrs:{variant:"primary",to:{name:"Orders"},size:"sm"}},[a("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Kembali ke Daftar Pesanan\n          ")],1)],1)],1)],1):t.order?a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-breadcrumb",{attrs:{items:t.breadcrumbItems}})],1),t._v(" "),a("b-col",{attrs:{lg:"8"}},[a("b-card",{staticClass:"mb-4"},[a("b-card-title",[a("b-icon",{attrs:{icon:"kanban"}}),t._v("\n            Progress pesanan "),t.order?a("span",[t._v("#"+t._s(t.order.order_number))]):t._e()],1),t._v(" "),a("OrderTimeline")],1),t._v(" "),a("b-card",{staticClass:"mb-4"},[a("b-card-title",{staticClass:"d-flex align-items-center flex-wrap"},[a("span",{staticClass:"mr-2"},[a("b-icon",{attrs:{icon:"receipt"}}),t._v(" Ringkasan Order #"+t._s(t.order.order_number)+"\n            ")],1),t._v(" "),a("b-badge",{staticClass:"ml-2",attrs:{variant:t.getStatusVariant(t.order.status)}},[t._v("\n              "+t._s(t.formatStatus(t.order.status))+"\n            ")])],1),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("p",{staticClass:"mb-1"},[a("strong",[t._v("Tanggal :")]),t._v(" "+t._s(t.formatDate(t.order.created_at)))])]),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("p",{staticClass:"mb-1"},[a("strong",[t._v("Nama:")]),t._v(" "+t._s(t.order.customer_name))]),t._v(" "),a("p",{staticClass:"mb-1"},[a("strong",[t._v("Email:")]),t._v(" "+t._s(t.order.customer_email))])])],1),t._v(" "),a("hr"),t._v(" "),a("b-list-group",{attrs:{flush:""}},[t._l(t.order.items,function(e){return a("b-list-group-item",{key:e.id},[a("b-row",{staticClass:"align-items-center"},[a("b-col",{staticClass:"text-center mb-2 mb-md-0",attrs:{md:"2"}},[a("b-img",{staticClass:"product-thumbnail",attrs:{src:t.getProductImage(e.product),rounded:"",fluid:""},on:{error:t.onItemImageError}})],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("h6",{staticClass:"mb-1"},[t._v(t._s(e.product?e.product.name:"No Product"))]),t._v(" "),a("p",{staticClass:"text-muted small mb-0"},[t._v("\n                    Template: "+t._s(e.template?e.template.name:"N/A")),a("br"),t._v("\n                    Qty: "+t._s(e.quantity)+" × "+t._s(t.formatCurrency(e.price))+"\n                    "),e.design_same?t._e():a("span",[t._v("(Beda Desain)")]),a("br"),t._v(" "),e.template&&e.template.layout_data&&void 0!==e.template.layout_data.photo_slots?a("span",[a("b-icon",{staticClass:"mr-1",attrs:{icon:"images"}}),t._v("\n                      Foto yang diperlukan:\n                      "),a("strong",[t._v("\n                        "+t._s(t.getTotalPhotoSlotsForItem(e))+"\n                        ("+t._s(e.template.layout_data.photo_slots)+" per photobook)\n                      ")])],1):e.template?a("span",[a("b-icon",{staticClass:"mr-1",attrs:{icon:"images"}}),t._v("\n                      Foto yang diperlukan: "),a("strong",[t._v("N/A")])],1):t._e()])]),t._v(" "),a("b-col",{staticClass:"text-md-right",attrs:{md:"4"}},[a("strong",[t._v(t._s(t.formatCurrency(e.quantity*e.price)))])])],1)],1)}),t._v(" "),a("b-list-group-item",{staticClass:"d-flex justify-content-between px-0"},[a("span",[t._v("Subtotal")]),t._v(" "),a("strong",[t._v(t._s(t.formatCurrency(t.order.sub_total_amount)))])]),t._v(" "),t.order.discount_amount&&t.order.discount_amount>0?a("b-list-group-item",{staticClass:"d-flex justify-content-between px-0 text-success"},[a("span",[t._v("\n                Diskon\n                "),t.order.coupons&&t.order.coupons.length>0?a("span",[t._v("\n                  ("+t._s(t.order.coupons.map(function(t){return t.code}).join(", "))+")\n                ")]):t._e()]),t._v(" "),a("strong",[t._v("- "+t._s(t.formatCurrency(t.order.discount_amount)))])]):t._e(),t._v(" "),a("b-list-group-item",{staticClass:"d-flex justify-content-between px-0 bg-light"},[a("h5",{staticClass:"mb-0"},[t._v("Total")]),t._v(" "),a("h5",{staticClass:"mb-0 text-primary"},[t._v(t._s(t.formatCurrency(t.order.total_amount)))])])],2)],1),t._v(" "),a("b-card",{staticClass:"mb-4"},[a("b-card-title",[a("b-icon",{attrs:{icon:"person-lines-fill"}}),t._v(" Informasi Pelanggan\n          ")],1),t._v(" "),a("address",{staticClass:"mb-0"},[a("strong",[t._v(t._s(t.order.customer_name))]),a("br"),t._v("\n            "+t._s(t.order.customer_address)),a("br"),t._v("\n            "+t._s(t.order.customer_city)+", "+t._s(t.order.customer_postal_code)),a("br"),t._v(" "),t.order.customer_phone?a("span",[a("strong",[t._v("Phone:")]),t._v(" "+t._s(t.order.customer_phone))]):t._e()])],1)],1),t._v(" "),a("b-col",{attrs:{lg:"4"}},[a("b-card",{staticClass:"mb-4"},[a("b-card-title",[a("b-icon",{attrs:{icon:"credit-card"}}),t._v(" Pembayaran & Aksi")],1),t._v(" "),t.paymentError?a("b-alert",{staticClass:"mb-3",attrs:{variant:"danger",dismissible:""},on:{dismissed:function(e){t.paymentError=""}}},[t._v("\n            "+t._s(t.paymentError)+"\n          ")]):t._e(),t._v(" "),t.order&&"pending"===t.order.status?a("b-button",{staticClass:"mb-2",attrs:{variant:"outline-danger",block:"",size:"sm",disabled:t.isCancelling},on:{click:t.cancelOrder}},[t.isCancelling?a("b-spinner",{attrs:{small:""}}):t._e(),t._v("\n            "+t._s(t.isCancelling?"Cancelling...":"Cancel Order")+"\n          ")],1):t._e(),t._v(" "),"pending"===t.order.status&&t.snapToken?a("div",[a("p",{staticClass:"text-muted small mb-2"},[t._v("Selesaikan pembayaran anda.")]),t._v(" "),a("b-button",{staticClass:"mb-2",attrs:{variant:"success",size:"lg",block:"",disabled:t.isPaying},on:{click:t.initiatePayment}},[t.isPaying?a("b-spinner",{attrs:{small:""}}):t._e(),t._v("\n              "+t._s(t.isPaying?"Opening Payment...":"Pay Now ("+t.formatCurrency(t.order.total_amount)+")")+"\n            ")],1),t._v(" "),a("p",{staticClass:"text-muted small mb-0"},[a("b-icon",{attrs:{icon:"info-circle"}}),t._v("\n              You will be redirected to Midtrans secure payment page.\n            ")],1)],1):"pending"!==t.order.status||t.snapToken?"paid"===t.order.status?a("div",[a("b-alert",{staticClass:"mb-3",attrs:{variant:"info",show:""}},[a("b-icon",{attrs:{icon:"hourglass-split"}}),t._v(" "),a("strong",[t._v("Payment Berhasil!")]),a("br"),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("Paid on "+t._s(t.formatDate(t.order.paid_at)))])],1),t._v(" "),a("p",{staticClass:"mb-2"},[a("b-icon",{attrs:{icon:"cloud-download"}}),t._v("\n              We are preparing your Google Drive folder for file uploads. You will receive the link soon.\n            ")],1),t._v(" "),a("b-alert",{staticClass:"small mb-0",attrs:{variant:"warning",show:""}},[a("b-icon",{attrs:{icon:"info-circle"}}),t._v("\n              Please wait for the folder link. In-app upload is no longer used.\n            ")],1)],1):"file_upload"===t.order.status?a("div",[a("b-alert",{staticClass:"mb-3",attrs:{variant:"success",show:""}},[a("b-icon",{attrs:{icon:"check-circle"}}),t._v(" "),a("strong",[t._v("Folder Siap!")]),t._v(" "),a("br"),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("Updated "+t._s(t.formatDate(t.order.updated_at)))])],1),t._v(" "),t.order.google_drive_folder_url?a("b-button",{staticClass:"mb-2",attrs:{href:t.order.google_drive_folder_url,target:"_blank",variant:"primary",block:""}},[a("b-icon",{attrs:{icon:"box-arrow-up-right"}}),t._v(" Open Google Drive Folder\n            ")],1):a("b-alert",{staticClass:"small mb-2",attrs:{variant:"danger",show:""}},[a("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v("\n              Folder link is missing. Please contact support.\n            ")],1),t._v(" "),a("p",{staticClass:"text-muted small mb-0"},[t._v("\n              Silahkan upload file photo ke link di atas, tim kami akan menghubungi anda.\n            ")])],1):"cancelled"===t.order.status?a("div",[a("b-alert",{staticClass:"mb-2",attrs:{variant:"danger",show:""}},[a("b-icon",{attrs:{icon:"x-circle"}}),t._v(" "),a("strong",[t._v("Order Cancelled")]),a("br"),t._v(" "),t.order.cancelled_at?a("small",{staticClass:"text-muted"},[t._v("Dibatalkan pada "+t._s(t.formatDate(t.order.cancelled_at)))]):t._e()],1),t._v(" "),a("p",{staticClass:"mb-0"},[t._v("Mengalami kendala?,hubungi tim kami.")])],1):a("div",[a("b-alert",{staticClass:"mb-0",attrs:{variant:t.getStatusVariant(t.order.status),show:""}},[a("strong",[t._v(t._s(t.formatStatus(t.order.status)))])]),t._v(" "),a("p",{staticClass:"mt-2 mb-0"},[t._v("\n              Status order anda sekarang "),a("strong",[t._v(t._s(t.formatStatus(t.order.status)))]),t._v(".\n            ")])],1):a("div",[a("b-alert",{staticClass:"mb-0",attrs:{variant:"warning",show:""}},[t._v("\n              Payment info unavailable. Refresh or contact support.\n            ")])],1),t._v(" "),a("hr"),t._v(" "),a("b-button",{staticClass:"mb-2",attrs:{variant:"outline-primary",block:"",size:"sm",to:{name:"Orders"}}},[a("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Kembali ke Daftar Pesanan\n          ")],1)],1),t._v(" "),a("b-card",{staticClass:"mb-4"},[a("b-card-title",[a("b-icon",{attrs:{icon:"geo-alt"}}),t._v(" Ambil di Toko\n          ")],1),t._v(" "),a("div",{staticClass:"mb-2"},[a("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.pickupInfo.name))]),t._v(" "),a("address",{staticClass:"mb-2"},[t._v("\n              "+t._s(t.pickupInfo.address_line)),a("br"),t._v("\n              "+t._s(t.pickupInfo.city)+" "+t._s(t.pickupInfo.postal_code)+"\n            ")]),t._v(" "),a("div",{staticClass:"small text-muted"},[a("b-icon",{attrs:{icon:"clock"}}),t._v("\n              Jam Operasional: "+t._s(t.pickupInfo.open_hours)+"\n            ")],1),t._v(" "),t.pickupInfo.phone?a("div",{staticClass:"small text-muted mt-1"},[a("b-icon",{attrs:{icon:"telephone"}}),t._v(" "),a("a",{staticClass:"ml-1",attrs:{href:"tel:"+t.pickupInfo.phone}},[t._v(t._s(t.pickupInfo.phone))])],1):t._e()]),t._v(" "),a("div",{staticClass:"d-flex flex-wrap"},[t.pickupInfo.maps_url?a("b-button",{staticClass:"mr-2 mb-2",attrs:{href:t.pickupInfo.maps_url,target:"_blank",variant:"outline-primary"}},[a("b-icon",{attrs:{icon:"map"}}),t._v(" Buka di Google Maps\n            ")],1):t._e(),t._v(" "),t.pickupInfo.whatsapp?a("b-button",{staticClass:"mb-2",attrs:{href:"https://wa.me/"+t.formatPhoneToWa(t.pickupInfo.whatsapp),target:"_blank",variant:"success"}},[a("b-icon",{attrs:{icon:"whatsapp"}}),t._v(" Chat via WhatsApp\n            ")],1):t._e()],1),t._v(" "),t.order.pickup_code?a("div",{staticClass:"mt-3"},[a("label",{staticClass:"small text-muted d-block mb-2"},[a("b-icon",{staticClass:"mr-1",attrs:{icon:"key"}}),t._v(" "),a("strong",[t._v("Pickup Code")])],1),t._v(" "),a("b-input-group",{staticClass:"pickup-code-group",attrs:{size:"sm"}},[a("b-form-input",{staticClass:"fw-bold",attrs:{value:t.order.pickup_code,readonly:""}}),t._v(" "),a("b-input-group-append",[a("b-button",{staticClass:"pickup-copy-btn",attrs:{variant:"outline-primary"},on:{click:t.copyPickupCode}},[a("b-icon",{staticClass:"mr-1",attrs:{icon:"clipboard"}}),t._v(" Copy\n                ")],1)],1)],1),t._v(" "),a("small",{staticClass:"text-muted d-block mt-1"},[t._v("\n              Tunjukkan atau ketik kode ini saat pengambilan pesanan.\n            ")])],1):t._e()],1)],1)],1):t._e()],1)],1)},[],!1,null,"4611d945",null).exports},7768:(t,e,a)=>{a.d(e,{A:()=>i});var r=a(6314),n=a.n(r)()(function(t){return t[1]});n.push([t.id,'.wizard-container[data-v-ce9759ec]{display:flex;gap:8px;justify-content:space-between;margin:.5rem 0 1rem;padding:10px 0 6px;position:relative}.wizard-container[data-v-ce9759ec]:before{background:#e5e7eb;content:"";height:2px;left:0;position:absolute;right:0;top:28px;z-index:1}.wizard-step[data-v-ce9759ec]{align-items:center;display:flex;flex:1 1 0;flex-direction:column;position:relative;text-align:center;z-index:2}.step-line[data-v-ce9759ec]{background:#e5e7eb;height:2px;left:0;position:absolute;right:0;top:28px;transition:background-color .25s ease}.wizard-step:first-child .step-line[data-v-ce9759ec]{left:50%}.wizard-step:last-child .step-line[data-v-ce9759ec]{right:50%}.step-icon[data-v-ce9759ec]{align-items:center;background:#f1f5f9;border:2px solid #e2e8f0;border-radius:999px;color:#64748b;display:flex;height:44px;justify-content:center;transition:all .2s ease;width:44px}.step-label[data-v-ce9759ec]{color:#6b7280;font-size:.85rem;font-weight:600;margin-top:.5rem}.step-date[data-v-ce9759ec]{color:#94a3b8;font-size:.72rem}.wizard-step.completed .step-icon[data-v-ce9759ec]{background:#10b981;border-color:#10b981;color:#fff}.wizard-step.completed .step-date[data-v-ce9759ec],.wizard-step.completed .step-label[data-v-ce9759ec]{color:#10b981}.wizard-step.completed .step-line[data-v-ce9759ec]{background:#10b981}.wizard-step.active .step-icon[data-v-ce9759ec]{background:#3b82f6;border-color:#3b82f6;box-shadow:0 4px 10px rgba(59,130,246,.25);color:#fff;transform:scale(1.08)}.wizard-step.active .step-date[data-v-ce9759ec],.wizard-step.active .step-label[data-v-ce9759ec]{color:#3b82f6}.wizard-step.active .step-line[data-v-ce9759ec]{background:#10b981}.wizard-step.cancelled .step-date[data-v-ce9759ec],.wizard-step.cancelled .step-icon[data-v-ce9759ec],.wizard-step.cancelled .step-label[data-v-ce9759ec]{opacity:.65}.current-step-detail[data-v-ce9759ec]{border:1px solid #e5e7eb}@media (max-width:767.98px){.wizard-container[data-v-ce9759ec]{flex-wrap:wrap;gap:14px 10px}.wizard-container[data-v-ce9759ec]:before{display:none}.wizard-step[data-v-ce9759ec]{align-items:center;flex:0 0 calc(50% - 5px)}.wizard-step .step-line[data-v-ce9759ec]{display:none}.step-icon[data-v-ce9759ec]{height:40px;width:40px}.step-label[data-v-ce9759ec]{font-size:.8rem}.step-date[data-v-ce9759ec]{font-size:.68rem}}@media (max-width:420px){.wizard-step[data-v-ce9759ec]{flex:0 0 100%}}',""]);const i=n}}]);