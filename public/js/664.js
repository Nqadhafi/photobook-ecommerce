/*! For license information please see 664.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[664],{4664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(4065);function r(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",c=a.toStringTag||"@@toStringTag";function s(a,n,r,c){var s=n&&n.prototype instanceof l?n:l,d=Object.create(s.prototype);return i(d,"_invoke",function(a,n,r){var i,c,s,l=0,d=r||[],p=!1,u={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,a){return i=t,c=0,s=e,u.n=a,o}};function m(a,n){for(c=a,s=n,t=0;!p&&l&&!r&&t<d.length;t++){var r,i=d[t],m=u.p,f=i[2];a>3?(r=f===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((r=a<2&&m<i[1])?(c=0,u.v=n,u.n=i[1]):m<f&&(r=a<3||i[0]>n||n>f)&&(i[4]=a,i[5]=n,u.n=f,c=0))}if(r||a>1)return o;throw p=!0,n}return function(r,d,f){if(l>1)throw TypeError("Generator is already running");for(p&&1===d&&m(d,f),c=d,s=f;(t=c<2?e:s)||!p;){i||(c?c<3?(c>1&&(u.n=-1),m(c,s)):u.n=s:u.v=s);try{if(l=2,i){if(c||(r="next"),t=i[r]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),c=1);i=e}else if((t=(p=u.n<0)?s:a.call(n,u))!==o)break}catch(t){i=e,c=1,s=t}finally{l=1}}return{value:t,done:p}}}(a,r,c),!0),d}var o={};function l(){}function d(){}function p(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(i(t={},n,function(){return this}),t),m=p.prototype=l.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=p,i(m,"constructor",p),i(p,"constructor",d),d.displayName="GeneratorFunction",i(p,c,"GeneratorFunction"),i(m),i(m,c,"Generator"),i(m,n,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:f}})()}function i(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}i=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var c=function(t,a){i(e,t,function(e){return this._invoke(t,a,e)})};c("next",0),c("throw",1),c("return",2)}},i(e,t,a,n)}function c(e,t,a,n,r,i,c){try{var s=e[i](c),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(n,r)}function s(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function s(e){c(i,n,r,s,o,"next",e)}function o(e){c(i,n,r,s,o,"throw",e)}s(void 0)})}}const o={name:"OrderTimeline",data:function(){return{order:null,rawTimeline:[],timeline:[],loading:!1,error:null,currentStepIndex:-1,cancelIndex:-1,pickupCode:null}},created:function(){var e=this;return s(r().m(function t(){return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.loadOrder();case 1:return t.n=2,e.loadTimeline();case 2:return t.a(2)}},t)}))()},computed:{isCancelled:function(){return this.timeline.some(function(e){return"cancelled"===e.status&&e.timestamp})},currentStep:function(){return this.currentStepIndex>=0&&this.currentStepIndex<this.timeline.length?this.timeline[this.currentStepIndex]:null}},methods:{loadOrder:function(){var e=this;return s(r().m(function t(){var a,i,c;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,a=e.$route.params.id,t.n=1,n.A.getOrder(a);case 1:i=t.v,e.order=i.data,e.pickupCode=e.order&&e.order.pickup_code?e.order.pickup_code:null,t.n=3;break;case 2:t.p=2,c=t.v,console.warn("loadOrder (optional) failed:",c);case 3:return t.a(2)}},t,null,[[0,2]])}))()},loadTimeline:function(){var e=this;return s(r().m(function t(){var a,i,c;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return e.loading=!0,e.error=null,t.p=1,a=e.$route.params.id,t.n=2,n.A.getOrderTimeline(a);case 2:i=t.v,e.rawTimeline=Array.isArray(i.data)?i.data:[],e.timeline=e.normalizeTimeline(e.rawTimeline,e.order),e.computeCurrentIndex(),t.n=4;break;case 3:t.p=3,c=t.v,console.error("Failed to load timeline:",c),e.error=(null==c?void 0:c.message)||"Failed to load order progress.";case 4:return t.p=4,e.loading=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}))()},normalizeTimeline:function(e,t){var a={created:"pending",pending:"pending",paid:"paid",file_uploaded:"file_upload",file_upload:"file_upload",processing:"processing",ready:"ready",completed:"completed",cancelled:"cancelled"},n={};e.forEach(function(e){var t=a[(e.status||"").toLowerCase()]||"pending",r=e.timestamp||e.updated_at||e.created_at||null;(!n[t]||r&&new Date(r)>new Date(n[t]))&&(n[t]=r)}),t&&(t.created_at&&!n.pending&&(n.pending=t.created_at),t.paid_at&&!n.paid&&(n.paid=t.paid_at),"file_upload"!==t.status&&!t.file_upload_at||n.file_upload||(n.file_upload=t.file_upload_at||t.updated_at||null),"processing"!==t.status&&!t.processing_at||n.processing||(n.processing=t.processing_at||t.updated_at||null),"ready"!==t.status&&!t.ready_at||n.ready||(n.ready=t.ready_at||t.updated_at||null),"completed"!==t.status&&!t.completed_at||n.completed||(n.completed=t.completed_at||t.updated_at||null));var r=null,i=e.find(function(e){return"cancelled"===a[(e.status||"").toLowerCase()]});i?r=i.timestamp||i.updated_at||i.created_at||null:t&&"cancelled"===t.status&&(r=t.cancelled_at||t.updated_at||null);var c=["pending","paid","file_upload","processing","ready","completed"].map(function(e){return{status:e,timestamp:n[e]||null}});return r&&c.push({status:"cancelled",timestamp:r}),c},computeCurrentIndex:function(){var e=this.timeline.findIndex(function(e){return"cancelled"===e.status&&e.timestamp});if(-1!==e)return this.currentStepIndex=e,void(this.cancelIndex=e);for(var t=-1,a=0;a<this.timeline.length;a++)this.timeline[a].timestamp&&(t=a);this.currentStepIndex=t},getLabel:function(e){return{pending:"Menunggu Pembayaran",paid:"Pembayaran Diterima",file_upload:"Upload File Anda",processing:"Sedang Diproduksi",ready:"Siap Diambil",completed:"Selesai",cancelled:"Dibatalkan"}[e]||e},getDescription:function(e){return{pending:"Pesanan berhasil dibuat, menunggu pembayaran.",paid:"Pembayaran diterima. Sedang menyiapkan folder upload.",file_upload:"Link Google Drive Siap, Silahkan Upload File Anda.",processing:"Pesanan sedang diproduksi.",ready:"Pesanan siap diambil..",completed:"Pesanan telah selesai. Terima kasih!",cancelled:"Pesanan dibatalkan."}[e]||""},getIcon:function(e){return{pending:"cart-plus",paid:"cash-coin",file_upload:"cloud-upload",processing:"gear",ready:"box-seam",completed:"check-circle",cancelled:"x-circle"}[e]||"question-circle"},getVariant:function(e){return{pending:"warning",paid:"info",file_upload:"primary",processing:"primary",ready:"warning",completed:"success",cancelled:"danger"}[e]||"secondary"},formatDate:function(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"N/A"}}}};var l=a(5072),d=a.n(l),p=a(7768),u={insert:"head",singleton:!1};d()(p.A,u);p.A.locals;const m=(0,a(4486).A)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[e.loading?a("b-row",[a("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[a("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),e._v(" "),a("p",{staticClass:"mt-3"},[e._v("Loading order progress...")])],1)],1):e.error?a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-alert",{attrs:{variant:"danger",show:""}},[a("h4",[a("b-icon",{attrs:{icon:"exclamation-triangle"}}),e._v(" Error")],1),e._v(" "),a("p",{staticClass:"mb-3"},[e._v(e._s(e.error))]),e._v(" "),a("div",{staticClass:"d-flex flex-wrap gap-2"},[e.order?a("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:e.$route.params.id}},variant:"primary",size:"sm"}},[a("b-icon",{attrs:{icon:"arrow-left"}}),e._v(" Kembali ke Pesanan\n          ")],1):e._e(),e._v(" "),a("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary",size:"sm"}},[a("b-icon",{attrs:{icon:"list"}}),e._v(" Lihat Semua Pesanan\n          ")],1)],1)])],1)],1):e.timeline.length?a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-card",{staticClass:"border-0 shadow-sm"},[a("div",{staticClass:"wizard-container"},e._l(e.timeline,function(t,n){return a("div",{key:t.status,class:["wizard-step",{completed:n<e.currentStepIndex},{active:n===e.currentStepIndex},{future:n>e.currentStepIndex},{cancelled:e.isCancelled&&n!==e.cancelIndex}]},[a("div",{staticClass:"step-line"}),e._v(" "),a("div",{staticClass:"step-icon-wrapper"},[a("div",{staticClass:"step-icon",class:"ico-"+t.status},[a("b-icon",{attrs:{icon:e.getIcon(t.status)}})],1)]),e._v(" "),a("div",{staticClass:"step-label"},[e._v(e._s(e.getLabel(t.status)))]),e._v(" "),t.timestamp?a("div",{staticClass:"step-date text-muted small"},[e._v("\n              "+e._s(e.formatDate(t.timestamp))+"\n            ")]):a("div",{staticClass:"step-date text-muted small"},[e._v("Pending")])])}),0),e._v(" "),e.currentStep?a("div",{staticClass:"current-step-detail mt-4 p-3 bg-light rounded"},[a("h5",{staticClass:"mb-2 d-flex align-items-center"},[a("b-icon",{class:"mr-2 text-"+e.getVariant(e.currentStep.status),attrs:{icon:e.getIcon(e.currentStep.status)}}),e._v("\n            "+e._s(e.getLabel(e.currentStep.status))+"\n          ")],1),e._v(" "),a("p",{staticClass:"mb-1"},[e._v(e._s(e.getDescription(e.currentStep.status)))]),e._v(" "),a("small",{staticClass:"text-muted d-block mb-2"},[a("b-icon",{attrs:{icon:"clock"}}),e._v("\n            "+e._s(e.currentStep.timestamp?e.formatDate(e.currentStep.timestamp):"Waiting to be updated")+"\n          ")],1),e._v(" "),!e.pickupCode||"ready"!==e.currentStep.status&&"completed"!==e.currentStep.status?e._e():a("div",{staticClass:"mt-2"},[a("strong",[e._v("Pickup Code:")]),e._v(" "),a("code",{staticClass:"bg-white px-2 py-1 rounded"},[e._v(e._s(e.pickupCode))])]),e._v(" "),e.isCancelled?a("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:"",variant:"danger"}},[a("b-icon",{attrs:{icon:"x-circle"}}),e._v("\n            Order telah "),a("strong",[e._v("dibatalkan")]),e._v(".\n          ")],1):e._e()],1):e._e()])],1)],1):a("b-row",[a("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[a("b-icon",{attrs:{icon:"hourglass-split","font-scale":"3",variant:"secondary"}}),e._v(" "),a("h4",{staticClass:"mt-3"},[e._v("No timeline available.")]),e._v(" "),a("p",{staticClass:"text-muted"},[e._v("Progress pesanan akan segera ditampilkan.")]),e._v(" "),a("div",{staticClass:"d-flex justify-content-center gap-2"},[e.order?a("b-button",{staticClass:"mr-2",attrs:{to:{name:"OrderDetail",params:{id:e.$route.params.id}},variant:"primary"}},[a("b-icon",{attrs:{icon:"arrow-left"}}),e._v(" Kembali ke Pesanan\n        ")],1):e._e(),e._v(" "),a("b-button",{attrs:{to:{name:"Orders"},variant:"outline-primary"}},[a("b-icon",{attrs:{icon:"list"}}),e._v(" Lihat Semua Pesanan\n        ")],1)],1)],1)],1)],1)},[],!1,null,"ce9759ec",null).exports},7768:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(6314),r=a.n(n)()(function(e){return e[1]});r.push([e.id,'.wizard-container[data-v-ce9759ec]{display:flex;gap:8px;justify-content:space-between;margin:.5rem 0 1rem;padding:10px 0 6px;position:relative}.wizard-container[data-v-ce9759ec]:before{background:#e5e7eb;content:"";height:2px;left:0;position:absolute;right:0;top:28px;z-index:1}.wizard-step[data-v-ce9759ec]{align-items:center;display:flex;flex:1 1 0;flex-direction:column;position:relative;text-align:center;z-index:2}.step-line[data-v-ce9759ec]{background:#e5e7eb;height:2px;left:0;position:absolute;right:0;top:28px;transition:background-color .25s ease}.wizard-step:first-child .step-line[data-v-ce9759ec]{left:50%}.wizard-step:last-child .step-line[data-v-ce9759ec]{right:50%}.step-icon[data-v-ce9759ec]{align-items:center;background:#f1f5f9;border:2px solid #e2e8f0;border-radius:999px;color:#64748b;display:flex;height:44px;justify-content:center;transition:all .2s ease;width:44px}.step-label[data-v-ce9759ec]{color:#6b7280;font-size:.85rem;font-weight:600;margin-top:.5rem}.step-date[data-v-ce9759ec]{color:#94a3b8;font-size:.72rem}.wizard-step.completed .step-icon[data-v-ce9759ec]{background:#10b981;border-color:#10b981;color:#fff}.wizard-step.completed .step-date[data-v-ce9759ec],.wizard-step.completed .step-label[data-v-ce9759ec]{color:#10b981}.wizard-step.completed .step-line[data-v-ce9759ec]{background:#10b981}.wizard-step.active .step-icon[data-v-ce9759ec]{background:#3b82f6;border-color:#3b82f6;box-shadow:0 4px 10px rgba(59,130,246,.25);color:#fff;transform:scale(1.08)}.wizard-step.active .step-date[data-v-ce9759ec],.wizard-step.active .step-label[data-v-ce9759ec]{color:#3b82f6}.wizard-step.active .step-line[data-v-ce9759ec]{background:#10b981}.wizard-step.cancelled .step-date[data-v-ce9759ec],.wizard-step.cancelled .step-icon[data-v-ce9759ec],.wizard-step.cancelled .step-label[data-v-ce9759ec]{opacity:.65}.current-step-detail[data-v-ce9759ec]{border:1px solid #e5e7eb}@media (max-width:767.98px){.wizard-container[data-v-ce9759ec]{flex-wrap:wrap;gap:14px 10px}.wizard-container[data-v-ce9759ec]:before{display:none}.wizard-step[data-v-ce9759ec]{align-items:center;flex:0 0 calc(50% - 5px)}.wizard-step .step-line[data-v-ce9759ec]{display:none}.step-icon[data-v-ce9759ec]{height:40px;width:40px}.step-label[data-v-ce9759ec]{font-size:.8rem}.step-date[data-v-ce9759ec]{font-size:.68rem}}@media (max-width:420px){.wizard-step[data-v-ce9759ec]{flex:0 0 100%}}',""]);const i=r}}]);