/*! For license information please see 197.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[197],{2173:(t,e,o)=>{o.d(e,{A:()=>a});var r=o(6314),n=o.n(r)()(function(t){return t[1]});n.push([t.id,".product-thumbnail[data-v-575d72fe]{max-height:80px;-o-object-fit:cover;object-fit:cover}.sticky-top[data-v-575d72fe]{z-index:1000}.terms-content[data-v-575d72fe]{max-height:400px;overflow-y:auto}.terms-content h5[data-v-575d72fe],.terms-content h6[data-v-575d72fe]{margin-bottom:.5rem;margin-top:1rem}.terms-content p[data-v-575d72fe]{margin-bottom:.5rem}",""]);const a=n},3197:(t,e,o)=>{o.r(e),o.d(e,{default:()=>_});var r=o(5353),n=o(4065);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){var t,e,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function a(o,r,n,a){var s=r&&r.prototype instanceof u?r:u,l=Object.create(s.prototype);return c(l,"_invoke",function(o,r,n){var a,s,c,u=0,l=n||[],p=!1,d={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,o){return a=e,s=0,c=t,d.n=o,i}};function m(o,r){for(s=o,c=r,e=0;!p&&u&&!n&&e<l.length;e++){var n,a=l[e],m=d.p,f=a[2];o>3?(n=f===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=m&&((n=o<2&&m<a[1])?(s=0,d.v=r,d.n=a[1]):m<f&&(n=o<3||a[0]>r||r>f)&&(a[4]=o,a[5]=r,d.n=f,s=0))}if(n||o>1)return i;throw p=!0,r}return function(n,l,f){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&m(l,f),s=l,c=f;(e=s<2?t:c)||!p;){a||(s?s<3?(s>1&&(d.n=-1),m(s,c)):d.n=c:d.v=c);try{if(u=2,a){if(s||(n="next"),e=a[n]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),s=1);a=t}else if((e=(p=d.n<0)?c:o.call(r,d))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:p}}}(o,n,a),!0),l}var i={};function u(){}function l(){}function p(){}e=Object.getPrototypeOf;var d=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),m=p.prototype=u.prototype=Object.create(d);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,n,"GeneratorFunction")),t.prototype=Object.create(m),t}return l.prototype=p,c(m,"constructor",p),c(p,"constructor",l),l.displayName="GeneratorFunction",c(p,n,"GeneratorFunction"),c(m),c(m,n,"Generator"),c(m,r,function(){return this}),c(m,"toString",function(){return"[object Generator]"}),(s=function(){return{w:a,m:f}})()}function c(t,e,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}c=function(t,e,o,r){if(e)n?n(t,e,{value:o,enumerable:!r,configurable:!r,writable:!r}):t[e]=o;else{var a=function(e,o){c(t,e,function(t){return this._invoke(e,o,t)})};a("next",0),a("throw",1),a("return",2)}},c(t,e,o,r)}function i(t,e,o,r,n,a,s){try{var c=t[a](s),i=c.value}catch(t){return void o(t)}c.done?e(i):Promise.resolve(i).then(r,n)}function u(t){return function(){var e=this,o=arguments;return new Promise(function(r,n){var a=t.apply(e,o);function s(t){i(a,r,n,s,c,"next",t)}function c(t){i(a,r,n,s,c,"throw",t)}s(void 0)})}}function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach(function(e){d(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function d(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const m={name:"Checkout",data:function(){return{loading:!1,processing:!1,error:null,customerInfo:{name:"",email:"",phone:"",address:"",city:"",postal_code:"",province:""},orderNotes:"",agreeToTerms:!1,couponCode:"",appliedCoupon:null,couponLoading:!1,couponError:null}},computed:p(p({},(0,r.L8)("cart",["cartItems","isEmpty"])),{},{cartSubtotal:function(){return this.cartItems.reduce(function(t,e){return t+e.quantity*e.product.price},0)},cartTotal:function(){if(this.appliedCoupon&&void 0!==this.appliedCoupon.discount_percent){var t=this.appliedCoupon.discount_percent/100*this.cartSubtotal;return Math.max(this.cartSubtotal-t,0)}return this.cartSubtotal},discountValue:function(){return this.appliedCoupon&&void 0!==this.appliedCoupon.discount_percent?this.appliedCoupon.discount_percent/100*this.cartSubtotal:0}}),created:function(){var t=this;return u(s().m(function e(){return s().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadCheckoutData();case 1:return e.a(2)}},e)}))()},methods:p(p({},(0,r.i0)("cart",["loadCart"])),{},{loadCheckoutData:function(){var t=this;return u(s().m(function e(){var o,r,n;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loading=!0,e.p=1,e.n=2,t.$store.dispatch("cart/loadCart");case 2:(o=t.$store.getters["auth/user"])&&(t.customerInfo.name=o.name,t.customerInfo.email=o.email,(r=o.photobook_profile)&&(t.customerInfo.phone=r.phone_number||"",t.customerInfo.address=r.address||"",t.customerInfo.city=r.city||"",t.customerInfo.postal_code=r.postal_code||"",t.customerInfo.province=r.province||"")),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Failed to load checkout ",n),t.$store.dispatch("showNotification",{title:"Error",message:"Failed to load checkout data",type:"danger"});case 4:return e.p=4,t.loading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},applyCoupon:function(){var t=this;return u(s().m(function e(){var o,r;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.couponCode.trim()){e.n=1;break}return e.a(2);case 1:return t.couponLoading=!0,t.couponError=null,e.p=2,e.n=3,n.A.validateCoupon(t.couponCode);case 3:o=e.v,t.appliedCoupon=o.coupon,t.$store.dispatch("showNotification",{title:"Coupon Applied",message:"Coupon ".concat(t.appliedCoupon.code," applied successfully!"),type:"success"}),e.n=5;break;case 4:e.p=4,r=e.v,console.error("Failed to apply coupon:",r),t.couponError=r.error||"Invalid or expired coupon code.",t.$store.dispatch("showNotification",{title:"Coupon Error",message:t.couponError,type:"danger"});case 5:return e.p=5,t.couponLoading=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}))()},removeCoupon:function(){this.appliedCoupon=null,this.couponCode="",this.couponError=null,this.$store.dispatch("showNotification",{title:"Coupon Removed",message:"Coupon has been removed.",type:"info"})},processCheckout:function(){var t=this;return u(s().m(function e(){var o,r,a;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.agreeToTerms){e.n=1;break}return t.$store.dispatch("showNotification",{title:"Error",message:"Please agree to the terms and conditions",type:"warning"}),e.a(2);case 1:return t.processing=!0,t.error=null,e.p=2,o={customer_name:t.customerInfo.name,customer_email:t.customerInfo.email,customer_phone:t.customerInfo.phone,customer_address:t.customerInfo.address,customer_city:t.customerInfo.city,customer_postal_code:t.customerInfo.postal_code,notes:t.orderNotes,coupon_code:t.appliedCoupon?t.appliedCoupon.code:null},e.n=3,n.A.checkout(o);case 3:return r=e.v,t.$store.dispatch("showNotification",{title:"Success",message:"Order placed successfully!",type:"success"}),e.n=4,t.$store.dispatch("cart/loadCart");case 4:t.$router.push({name:"OrderDetail",params:{id:r.order.id}}),e.n=6;break;case 5:e.p=5,a=e.v,console.error("Checkout failed:",a),a.error&&a.error.includes("coupon")&&(t.couponError=a.error),t.error=a.error||"Failed to process checkout. Please try again.",t.$store.dispatch("showNotification",{title:"Error",message:t.error,type:"danger"});case 6:return e.p=6,t.processing=!1,e.f(6);case 7:return e.a(2)}},e,null,[[2,5,6,7]])}))()},showTerms:function(){this.$bvModal.show("terms-modal")},getItemTotal:function(t){return t.quantity*t.product.price},formatCurrency:function(t){return new Intl.NumberFormat("id-ID").format(t)},getProductImage:function(t){return t.thumbnail?(t.thumbnail.startsWith("http"),t.thumbnail):"https://www.aaronfaber.com/wp-content/uploads/2017/03/product-placeholder-wp.jpg"},onImageError:function(t){t.target.src="https://www.aaronfaber.com/wp-content/uploads/2017/03/product-placeholder-wp.jpg"}})};var f=o(5072),b=o.n(f),v=o(2173),h={insert:"head",singleton:!1};b()(v.A,h);v.A.locals;const _=(0,o(4486).A)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("app-layout",[o("b-container",[o("b-row",{staticClass:"mb-4"},[o("b-col",[o("h1",[o("b-icon",{attrs:{icon:"credit-card"}}),t._v(" Checkout\n        ")],1),t._v(" "),o("p",{staticClass:"text-muted"},[t._v("Complete your order")])])],1),t._v(" "),t.loading?o("b-row",[o("b-col",{staticClass:"text-center py-5",attrs:{cols:"12"}},[o("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary"}}),t._v(" "),o("p",{staticClass:"mt-3"},[t._v("Preparing your checkout...")])],1)],1):t.isEmpty?o("b-row",[o("b-col",{attrs:{cols:"12"}},[o("b-alert",{attrs:{variant:"warning",show:""}},[o("h4",[o("b-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Empty Cart")],1),t._v(" "),o("p",[t._v("You don't have any items in your cart.")]),t._v(" "),o("b-button",{attrs:{variant:"primary",to:{name:"Products"}}},[o("b-icon",{attrs:{icon:"images"}}),t._v(" Browse Products\n          ")],1)],1)],1)],1):o("b-row",[o("b-col",{attrs:{lg:"8"}},[o("b-card",{staticClass:"mb-4"},[o("b-card-title",[o("b-icon",{attrs:{icon:"list"}}),t._v(" Order Summary\n          ")],1),t._v(" "),o("b-list-group",{attrs:{flush:""}},t._l(t.cartItems,function(e){return o("b-list-group-item",{key:e.id,staticClass:"py-3"},[o("b-row",[o("b-col",{staticClass:"text-center mb-2 mb-md-0",attrs:{md:"2"}},[o("b-img",{staticClass:"product-thumbnail",attrs:{src:t.getProductImage(e.product),alt:e.product.name,rounded:"",fluid:""},on:{error:t.onImageError}})],1),t._v(" "),o("b-col",{attrs:{md:"6"}},[o("h6",{staticClass:"mb-1"},[t._v(t._s(e.product.name))]),t._v(" "),o("p",{staticClass:"text-muted small mb-0"},[t._v("\n                    Qty: "+t._s(e.quantity)+" × Rp "+t._s(t.formatCurrency(e.product.price))+"\n                  ")])]),t._v(" "),o("b-col",{staticClass:"text-md-right",attrs:{md:"4"}},[o("strong",[t._v("Rp "+t._s(t.formatCurrency(t.getItemTotal(e))))])])],1)],1)}),1)],1),t._v(" "),o("b-card",{staticClass:"mb-4"},[o("b-card-title",[o("b-icon",{attrs:{icon:"tag"}}),t._v(" Coupon Code")],1),t._v(" "),o("b-form",{on:{submit:function(e){return e.preventDefault(),t.applyCoupon.apply(null,arguments)}}},[o("b-row",[o("b-col",{attrs:{md:"8"}},[o("b-form-group",{attrs:{label:"Enter your coupon code","label-for":"coupon-code",state:!t.couponError&&null,"invalid-feedback":t.couponError}},[o("b-form-input",{attrs:{id:"coupon-code",type:"text",placeholder:"Enter coupon code",disabled:t.couponLoading||!!t.appliedCoupon,required:""},model:{value:t.couponCode,callback:function(e){t.couponCode=e},expression:"couponCode"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"4"}},[o("b-button",{attrs:{type:"submit",variant:"outline-primary",disabled:t.couponLoading||!t.couponCode.trim()||!!t.appliedCoupon,block:""}},[t.couponLoading?[o("b-spinner",{attrs:{small:""}}),t._v(" Applying...\n                  ")]:t.appliedCoupon?[t._v("\n                    Applied\n                  ")]:[t._v("\n                    Apply Coupon\n                  ")]],2)],1)],1)],1),t._v(" "),t.appliedCoupon?o("b-alert",{staticClass:"mt-3 mb-0",attrs:{variant:"success",show:""}},[o("b-icon",{attrs:{icon:"check-circle"}}),t._v("\n            Coupon "),o("strong",[t._v(t._s(t.appliedCoupon.code))]),t._v(" applied!\n            You save "),o("strong",[t._v("Rp "+t._s(t.formatCurrency(t.discountValue)))]),t._v(".\n            "),o("b-button",{staticClass:"p-0 ml-2",attrs:{size:"sm",variant:"link",disabled:t.processing},on:{click:t.removeCoupon}},[t._v("\n              (Remove)\n            ")])],1):t._e()],1),t._v(" "),o("b-card",{staticClass:"mb-4"},[o("b-card-title",[o("b-icon",{attrs:{icon:"person"}}),t._v(" Customer Information\n          ")],1),t._v(" "),o("b-form",{on:{submit:function(e){return e.preventDefault(),t.processCheckout.apply(null,arguments)}}},[o("b-row",[o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:"Full Name *","label-for":"customer-name"}},[o("b-form-input",{attrs:{id:"customer-name",type:"text",required:"",disabled:t.processing},model:{value:t.customerInfo.name,callback:function(e){t.$set(t.customerInfo,"name",e)},expression:"customerInfo.name"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:"Email *","label-for":"customer-email"}},[o("b-form-input",{attrs:{id:"customer-email",type:"email",required:"",disabled:t.processing},model:{value:t.customerInfo.email,callback:function(e){t.$set(t.customerInfo,"email",e)},expression:"customerInfo.email"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:"Phone Number *","label-for":"customer-phone"}},[o("b-form-input",{attrs:{id:"customer-phone",type:"tel",required:"",disabled:t.processing},model:{value:t.customerInfo.phone,callback:function(e){t.$set(t.customerInfo,"phone",e)},expression:"customerInfo.phone"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:"Address *","label-for":"customer-address"}},[o("b-form-input",{attrs:{id:"customer-address",type:"text",required:"",disabled:t.processing},model:{value:t.customerInfo.address,callback:function(e){t.$set(t.customerInfo,"address",e)},expression:"customerInfo.address"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"4"}},[o("b-form-group",{attrs:{label:"City *","label-for":"customer-city"}},[o("b-form-input",{attrs:{id:"customer-city",type:"text",required:"",disabled:t.processing},model:{value:t.customerInfo.city,callback:function(e){t.$set(t.customerInfo,"city",e)},expression:"customerInfo.city"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"4"}},[o("b-form-group",{attrs:{label:"Postal Code *","label-for":"customer-postal-code"}},[o("b-form-input",{attrs:{id:"customer-postal-code",type:"text",required:"",disabled:t.processing},model:{value:t.customerInfo.postal_code,callback:function(e){t.$set(t.customerInfo,"postal_code",e)},expression:"customerInfo.postal_code"}})],1)],1),t._v(" "),o("b-col",{attrs:{md:"4"}},[o("b-form-group",{attrs:{label:"Province *","label-for":"customer-province"}},[o("b-form-input",{attrs:{id:"customer-province",type:"text",required:"",disabled:t.processing},model:{value:t.customerInfo.province,callback:function(e){t.$set(t.customerInfo,"province",e)},expression:"customerInfo.province"}})],1)],1)],1),t._v(" "),o("b-form-group",{attrs:{label:"Order Notes (Optional)","label-for":"order-notes"}},[o("b-form-textarea",{attrs:{id:"order-notes",rows:"3","max-rows":"6",disabled:t.processing},model:{value:t.orderNotes,callback:function(e){t.orderNotes=e},expression:"orderNotes"}})],1),t._v(" "),o("b-form-group",[o("b-form-checkbox",{attrs:{required:"",disabled:t.processing},model:{value:t.agreeToTerms,callback:function(e){t.agreeToTerms=e},expression:"agreeToTerms"}},[t._v("\n                I agree to the "),o("b-link",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showTerms.apply(null,arguments)}}},[t._v("Terms and Conditions")])],1)],1),t._v(" "),o("b-button",{attrs:{type:"submit",variant:"success",size:"lg",block:"",disabled:t.processing||!t.agreeToTerms}},[t.processing?[o("b-spinner",{attrs:{small:""}}),t._v(" Processing Order...\n              ")]:[o("b-icon",{attrs:{icon:"check-circle"}}),t._v(" Place Order (Rp "+t._s(t.formatCurrency(t.cartTotal))+")\n              ")]],2)],1)],1)],1),t._v(" "),o("b-col",{attrs:{lg:"4"}},[o("b-card",{staticClass:"sticky-top",staticStyle:{top:"20px"}},[o("b-card-title",[o("b-icon",{attrs:{icon:"receipt"}}),t._v(" Order Summary\n          ")],1),t._v(" "),o("b-list-group",{attrs:{flush:""}},[o("b-list-group-item",{staticClass:"d-flex justify-content-between"},[o("span",[t._v("Subtotal")]),t._v(" "),o("strong",[t._v("Rp "+t._s(t.formatCurrency(t.cartSubtotal)))])]),t._v(" "),t.appliedCoupon?o("b-list-group-item",{staticClass:"d-flex justify-content-between text-success"},[o("span",[t._v("Discount ("+t._s(t.appliedCoupon.code)+")")]),t._v(" "),o("strong",[t._v("- Rp "+t._s(t.formatCurrency(t.discountValue)))])]):t._e(),t._v(" "),o("b-list-group-item",{staticClass:"d-flex justify-content-between"},[o("span",[t._v("Shipping")]),t._v(" "),o("strong",[t._v("FREE")])]),t._v(" "),o("b-list-group-item",{staticClass:"d-flex justify-content-between"},[o("span",[t._v("Tax")]),t._v(" "),o("strong",[t._v("Included")])]),t._v(" "),o("b-list-group-item",{staticClass:"d-flex justify-content-between bg-light"},[o("h5",{staticClass:"mb-0"},[t._v("Total")]),t._v(" "),o("h5",{staticClass:"mb-0 text-primary"},[t._v("Rp "+t._s(t.formatCurrency(t.cartTotal)))])])],1),t._v(" "),t.error?o("b-alert",{staticClass:"mt-3",attrs:{variant:"danger",show:""}},[t._v("\n            "+t._s(t.error)+"\n          ")]):t._e(),t._v(" "),o("b-button",{staticClass:"mt-3",attrs:{variant:"outline-primary",block:"",to:{name:"Cart"},disabled:t.processing}},[o("b-icon",{attrs:{icon:"arrow-left"}}),t._v(" Back to Cart\n          ")],1)],1)],1)],1)],1),t._v(" "),o("b-modal",{attrs:{id:"terms-modal",title:"Terms and Conditions",size:"lg","ok-only":"","ok-title":"Close"}},[o("div",{staticClass:"terms-content"},[o("h5",[t._v("Photobook Studio Terms and Conditions")]),t._v(" "),o("p",[o("strong",[t._v("Last Updated:")]),t._v(" "+t._s((new Date).toLocaleDateString()))]),t._v(" "),o("h6",[t._v("1. General")]),t._v(" "),o("p",[t._v("By placing an order with Photobook Studio, you agree to these terms and conditions.")]),t._v(" "),o("h6",[t._v("2. Payment")]),t._v(" "),o("p",[t._v("All payments must be completed before order processing begins.")]),t._v(" "),o("h6",[t._v("3. Delivery")]),t._v(" "),o("p",[t._v("We aim to deliver your photobook within 7-14 business days after payment confirmation.")]),t._v(" "),o("h6",[t._v("4. Returns")]),t._v(" "),o("p",[t._v("Returns are accepted within 30 days for manufacturing defects only.")]),t._v(" "),o("h6",[t._v("5. Contact")]),t._v(" "),o("p",[t._v("For questions, contact us at support@photobookstudio.com")])])])],1)},[],!1,null,"575d72fe",null).exports}}]);