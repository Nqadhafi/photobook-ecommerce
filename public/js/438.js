/*! For license information please see 438.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[438],{3066:(t,r,e)=>{e.d(r,{A:()=>a});var n=e(6314),o=e.n(n)()(function(t){return t[1]});o.push([t.id,"",""]);const a=o},7728:(t,r,e)=>{e.d(r,{A:()=>d});var n=e(7304);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function c(e,n,o,a){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return i(l,"_invoke",function(e,n,o){var a,i,c,s=0,l=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(r,e){return a=r,i=0,c=t,p.n=e,u}};function f(e,n){for(i=e,c=n,r=0;!d&&s&&!o&&r<l.length;r++){var o,a=l[r],f=p.p,m=a[2];e>3?(o=m===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=f&&((o=e<2&&f<a[1])?(i=0,p.v=n,p.n=a[1]):f<m&&(o=e<3||a[0]>n||n>m)&&(a[4]=e,a[5]=n,p.n=m,i=0))}if(o||e>1)return u;throw d=!0,n}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,m),i=l,c=m;(r=i<2?t:c)||!d;){a||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(s=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((r=(d=p.n<0)?c:e.call(n,p))!==u)break}catch(r){a=t,i=1,c=r}finally{s=1}}return{value:r,done:d}}}(e,o,a),!0),l}var u={};function s(){}function l(){}function d(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(i(r={},n,function(){return this}),r),f=d.prototype=s.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,i(f,"constructor",d),i(d,"constructor",l),l.displayName="GeneratorFunction",i(d,o,"GeneratorFunction"),i(f),i(f,o,"Generator"),i(f,n,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m}})()}function i(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,r,e,n){if(r)o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e;else{var a=function(r,e){i(t,r,function(t){return this._invoke(r,e,t)})};a("next",0),a("throw",1),a("return",2)}},i(t,r,e,n)}function c(t,r,e,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var a=t.apply(r,e);function i(t){c(a,n,o,i,u,"next",t)}function u(t){c(a,n,o,i,u,"throw",t)}i(void 0)})}}function s(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var r=function(t,r){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==o(r)?r:r+""}const d=new(function(){return t=function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"getProducts",value:(m=u(a().m(function t(){var r,e,o,i,c=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},t.p=1,t.n=2,n.A.get("/products",{params:r});case 2:return e=t.v,t.a(2,e.data);case 3:throw t.p=3,i=t.v,(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch products"};case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return m.apply(this,arguments)})},{key:"getProduct",value:(f=u(a().m(function t(r){var e,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.get("/products/".concat(r));case 1:return e=t.v,t.a(2,e.data);case 2:throw t.p=2,i=t.v,(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return f.apply(this,arguments)})},{key:"getProductTemplates",value:(p=u(a().m(function t(r){var e,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.get("/products/".concat(r,"/templates"));case 1:return e=t.v,t.a(2,e.data);case 2:throw t.p=2,i=t.v,(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch templates"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return p.apply(this,arguments)})},{key:"getAdminProducts",value:(d=u(a().m(function t(){var r,e,o,i,c=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},t.p=1,t.n=2,n.A.get("/admin/products",{params:r});case 2:return e=t.v,t.a(2,e.data);case 3:throw t.p=3,i=t.v,console.error("ProductService.getAdminProducts failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin products"};case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return d.apply(this,arguments)})},{key:"getAdminProduct",value:(l=u(a().m(function t(r){var e,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.get("/admin/products/".concat(r));case 1:return e=t.v,t.a(2,e.data);case 2:throw t.p=2,i=t.v,console.error("ProductService.getAdminProduct(".concat(r,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin product details"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return l.apply(this,arguments)})},{key:"createAdminProduct",value:(c=u(a().m(function t(r){var e,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.post("/admin/products",r);case 1:return e=t.v,t.a(2,e.data);case 2:throw t.p=2,i=t.v,console.error("ProductService.createAdminProduct failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to create product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return c.apply(this,arguments)})},{key:"updateAdminProduct",value:(i=u(a().m(function t(r,e){var o,i,c;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.post("/admin/products/".concat(r),e);case 1:return o=t.v,t.a(2,o.data);case 2:throw t.p=2,c=t.v,console.error("ProductService.updateAdminProduct(".concat(r,") failed:"),c),(null===(i=c.response)||void 0===i?void 0:i.data)||{error:"Failed to update product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t,r){return i.apply(this,arguments)})},{key:"deleteAdminProduct",value:(o=u(a().m(function t(r){var e,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.A.delete("/admin/products/".concat(r));case 1:return e=t.v,t.a(2,e.data);case 2:throw t.p=2,i=t.v,console.error("ProductService.deleteAdminProduct(".concat(r,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to delete product"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return o.apply(this,arguments)})}],r&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,o,i,c,l,d,p,f,m}())},9438:(t,r,e)=>{e.r(r),e.d(r,{default:()=>f});var n=e(7728);function o(){var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",i=e.toStringTag||"@@toStringTag";function c(e,n,o,i){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return a(l,"_invoke",function(e,n,o){var a,i,c,s=0,l=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(r,e){return a=r,i=0,c=t,p.n=e,u}};function f(e,n){for(i=e,c=n,r=0;!d&&s&&!o&&r<l.length;r++){var o,a=l[r],f=p.p,m=a[2];e>3?(o=m===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=f&&((o=e<2&&f<a[1])?(i=0,p.v=n,p.n=a[1]):f<m&&(o=e<3||a[0]>n||n>m)&&(a[4]=e,a[5]=n,p.n=m,i=0))}if(o||e>1)return u;throw d=!0,n}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,m),i=l,c=m;(r=i<2?t:c)||!d;){a||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(s=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((r=(d=p.n<0)?c:e.call(n,p))!==u)break}catch(r){a=t,i=1,c=r}finally{s=1}}return{value:r,done:d}}}(e,o,i),!0),l}var u={};function s(){}function l(){}function d(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(a(r={},n,function(){return this}),r),f=d.prototype=s.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,a(f,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,n,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m}})()}function a(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,r,e,n){if(r)o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e;else{var i=function(r,e){a(t,r,function(t){return this._invoke(r,e,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,r,e,n)}function i(t,r,e,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var a=t.apply(r,e);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)})}}const u={name:"AdminProductEdit",props:{id:{type:[String,Number],required:!0}},data:function(){return{loading:!1,product:null,errorMessage:"",isSubmitting:!1,form:{name:"",description:"",price:null,thumbnail:null,is_active:!0},errors:{}}},computed:{previewThumbnailUrl:function(){return this.form.thumbnail?URL.createObjectURL(this.form.thumbnail):null}},created:function(){this.fetchProduct()},methods:{fetchProduct:function(){var t=this;return c(o().m(function r(){var e,a,i;return o().w(function(r){for(;;)switch(r.p=r.n){case 0:return t.loading=!0,t.errorMessage="",r.p=1,e=t.id,r.n=2,n.A.getAdminProduct(e);case 2:a=r.v,t.product=a,t.form.name=a.name,t.form.description=a.description,t.form.price=parseFloat(a.price),t.form.is_active=a.is_active,r.n=4;break;case 3:r.p=3,i=r.v,console.error("Failed to fetch product details:",i),t.errorMessage=i.error||"Failed to load product details. Please try again.";case 4:return r.p=4,t.loading=!1,r.f(4);case 5:return r.a(2)}},r,null,[[1,3,4,5]])}))()},getCurrentThumbnailUrl:function(){return this.product.thumbnail?"/storage/".concat(this.product.thumbnail):null},getValidationState:function(t){return void 0===this.errors[t]?null:!this.errors[t]},submitForm:function(){var t=this;return c(o().m(function r(){var e,a,i,c;return o().w(function(r){for(;;)switch(r.p=r.n){case 0:return t.isSubmitting=!0,t.errors={},r.p=1,(e=new FormData).append("name",t.form.name),e.append("description",t.form.description),e.append("price",t.form.price),t.form.thumbnail&&e.append("thumbnail",t.form.thumbnail),e.append("is_active",t.form.is_active?1:0),e.append("_method","PUT"),r.n=2,n.A.updateAdminProduct(t.id,e);case 2:a=r.v,t.$bvToast.toast("Product '".concat(a.name,"' updated successfully."),{title:"Success",variant:"success",solid:!0}),t.product=a,t.form.thumbnail=null,r.n=4;break;case 3:r.p=3,c=r.v,console.error("Failed to update product:",c),i=c.error||"Failed to update product. Please try again.",c.errors?(t.errors=c.errors,i&&0===Object.keys(c.errors).length&&t.$bvToast.toast(i,{title:"Validation Error",variant:"danger",solid:!0})):t.$bvToast.toast(i,{title:"Error",variant:"danger",solid:!0});case 4:return r.p=4,t.isSubmitting=!1,r.f(4);case 5:return r.a(2)}},r,null,[[1,3,4,5]])}))()}}};var s=e(5072),l=e.n(s),d=e(3066),p={insert:"head",singleton:!1};l()(d.A,p);d.A.locals;const f=(0,e(4486).A)(u,function(){var t=this,r=t.$createElement,e=t._self._c||r;return t.product?e("div",[e("b-row",{staticClass:"mb-3"},[e("b-col",[e("h2",[t._v("Edit Product: "+t._s(t.product.name))])])],1),t._v(" "),e("b-card",[e("b-form",{on:{submit:function(r){return r.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Name:","label-for":"product-name"}},[e("b-form-input",{attrs:{id:"product-name",required:"",placeholder:"Enter product name",state:t.getValidationState("name")},model:{value:t.form.name,callback:function(r){t.$set(t.form,"name",r)},expression:"form.name"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{state:t.getValidationState("name")}},[t._v("\n          "+t._s(t.errors.name)+"\n        ")])],1),t._v(" "),e("b-form-group",{attrs:{label:"Description:","label-for":"product-description"}},[e("b-form-textarea",{attrs:{id:"product-description",rows:"3",placeholder:"Enter product description"},model:{value:t.form.description,callback:function(r){t.$set(t.form,"description",r)},expression:"form.description"}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Price (Rp):","label-for":"product-price"}},[e("b-form-input",{attrs:{id:"product-price",type:"number",step:"0.01",min:"0",required:"",placeholder:"0.00",state:t.getValidationState("price")},model:{value:t.form.price,callback:function(r){t.$set(t.form,"price",t._n(r))},expression:"form.price"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{state:t.getValidationState("price")}},[t._v("\n          "+t._s(t.errors.price)+"\n        ")])],1),t._v(" "),e("b-form-group",{attrs:{label:"Thumbnail:","label-for":"product-thumbnail"}},[e("b-form-file",{attrs:{id:"product-thumbnail",accept:"image/*",placeholder:"Choose a new file...",state:t.getValidationState("thumbnail")},model:{value:t.form.thumbnail,callback:function(r){t.$set(t.form,"thumbnail",r)},expression:"form.thumbnail"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{state:t.getValidationState("thumbnail")}},[t._v("\n          "+t._s(t.errors.thumbnail)+"\n        ")]),t._v(" "),e("b-form-text",{attrs:{variant:"secondary"}},[e("small",[t._v("Allowed types: jpeg, png, jpg. Max size: 2MB. Leave blank to keep current thumbnail.")])]),t._v(" "),t.product.thumbnail?e("div",{staticClass:"mt-2"},[e("p",[e("strong",[t._v("Current Thumbnail:")])]),t._v(" "),e("b-img",{staticStyle:{"max-height":"150px"},attrs:{src:t.getCurrentThumbnailUrl(),thumbnail:"",fluid:"",alt:t.product.name}})],1):t._e(),t._v(" "),t.form.thumbnail?e("div",{staticClass:"mt-2"},[e("p",[e("strong",[t._v("New Thumbnail Preview:")])]),t._v(" "),e("b-img",{staticStyle:{"max-height":"150px"},attrs:{src:t.previewThumbnailUrl,thumbnail:"",fluid:"",alt:"New thumbnail preview"}})],1):t._e()],1),t._v(" "),e("b-form-group",[e("b-form-checkbox",{attrs:{switch:""},model:{value:t.form.is_active,callback:function(r){t.$set(t.form,"is_active",r)},expression:"form.is_active"}},[t._v("\n          Active\n        ")])],1),t._v(" "),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.isSubmitting}},[t.isSubmitting?e("b-spinner",{attrs:{small:""}}):t._e(),t._v("\n        "+t._s(t.isSubmitting?"Updating...":"Update Product")+"\n      ")],1),t._v(" "),e("b-button",{staticClass:"ml-2",attrs:{variant:"secondary",to:{name:"AdminProducts"}}},[t._v("\n        Cancel\n      ")])],1)],1)],1):t.loading?e("div",[e("b-spinner",{attrs:{variant:"primary",label:"Loading..."}}),t._v(" Loading product details...\n")],1):e("div",[e("b-alert",{attrs:{variant:"danger",show:""}},[e("h4",[t._v("Error loading product")]),t._v(" "),t.errorMessage?e("p",[t._v(t._s(t.errorMessage))]):e("p",[t._v("Product not found or an error occurred.")]),t._v(" "),e("b-button",{attrs:{variant:"secondary",to:{name:"AdminProducts"}}},[t._v("Back to List")])],1)],1)},[],!1,null,"5fbfe17f",null).exports}}]);