/*! For license information please see 24.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[24],{2024:(t,e,n)=>{n.r(e),n.d(e,{default:()=>d});var r=n(7597);function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function c(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return a(l,"_invoke",function(n,r,o){var a,i,c,u=0,l=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,i=0,c=t,f.n=n,s}};function d(n,r){for(i=n,c=r,e=0;!p&&u&&!o&&e<l.length;e++){var o,a=l[e],d=f.p,v=a[2];n>3?(o=v===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,f.v=r,f.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,i=0))}if(o||n>1)return s;throw p=!0,r}return function(o,l,v){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,v),i=l,c=v;(e=i<2?t:c)||!p;){a||(i?i<3?(i>1&&(f.n=-1),d(i,c)):f.n=c:f.v=c);try{if(u=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(p=f.n<0)?c:n.call(r,f))!==s)break}catch(e){a=t,i=1,c=e}finally{u=1}}return{value:e,done:p}}}(n,o,i),!0),l}var s={};function u(){}function l(){}function p(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=p.prototype=u.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=p,a(d,"constructor",p),a(p,"constructor",l),l.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(d),a(d,i,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m:v}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){a(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,n,r)}function i(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,s,"next",t)}function s(t){i(a,r,o,c,s,"throw",t)}c(void 0)})}}const s={name:"AdminCouponIndex",data:function(){return{isBusy:!1,coupons:[],fields:[{key:"code",label:"Code",sortable:!0},{key:"discount_percent",label:"Discount %",sortable:!0},{key:"max_uses",label:"Max Uses",sortable:!0},{key:"is_active",label:"Status",sortable:!0},{key:"starts_at",label:"Starts At",sortable:!0},{key:"expires_at",label:"Expires At",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],statusOptions:[{value:1,text:"Active"},{value:0,text:"Inactive"}],filters:{search:"",is_active:null},pagination:{currentPage:1,perPage:15,total:0},itemToDelete:{id:null,code:""}}},created:function(){this.fetchCoupons()},methods:{fetchCoupons:function(){var t=arguments,e=this;return c(o().m(function n(){var a,i,c,s,u;return o().w(function(n){for(;;)switch(n.p=n.n){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:1,e.isBusy=!0,n.p=1,i={page:a,per_page:e.pagination.perPage,search:e.filters.search,is_active:e.filters.is_active},n.n=2,r.A.getAdminCoupons(i);case 2:c=n.v,e.coupons=c.data,e.pagination.total=c.total,e.pagination.currentPage=c.current_page,n.n=4;break;case 3:n.p=3,u=n.v,console.error("Failed to fetch admin coupons:",u),s=u.error||"Failed to load coupons. Please try again.",e.$bvToast.toast(s,{title:"Error",variant:"danger",solid:!0}),e.coupons=[];case 4:return n.p=4,e.isBusy=!1,n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))()},onPageChange:function(t){this.fetchCoupons(t)},applyFilters:function(){this.pagination.currentPage=1,this.fetchCoupons(1)},resetFilters:function(){this.filters.search="",this.filters.is_active=null,this.pagination.currentPage=1,this.fetchCoupons(1)},confirmDelete:function(t,e){this.itemToDelete.id=t,this.itemToDelete.code=e,this.$bvModal.show("delete-coupon-modal")},deleteCoupon:function(t){var e=this;return c(o().m(function n(){var a,i;return o().w(function(n){for(;;)switch(n.p=n.n){case 0:return t.preventDefault(),n.p=1,n.n=2,r.A.deleteAdminCoupon(e.itemToDelete.id);case 2:e.$bvToast.toast("Coupon '".concat(e.itemToDelete.code,"' deleted successfully."),{title:"Success",variant:"success",solid:!0}),e.fetchCoupons(e.pagination.currentPage),e.$bvModal.hide("delete-coupon-modal"),n.n=4;break;case 3:n.p=3,i=n.v,console.error("Failed to delete coupon:",i),a=i.error||"Failed to delete coupon. Please try again.",e.$bvToast.toast(a,{title:"Error",variant:"danger",solid:!0}),e.$bvModal.hide("delete-coupon-modal");case 4:return n.a(2)}},n,null,[[1,3]])}))()},formatDate:function(t){return t?new Date(t).toLocaleString("id-ID"):""}}};var u=n(5072),l=n.n(u),p=n(4664),f={insert:"head",singleton:!1};l()(p.A,f);p.A.locals;const d=(0,n(4486).A)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{md:"6"}},[n("h2",[t._v("Coupon Management")])]),t._v(" "),n("b-col",{staticClass:"text-md-right",attrs:{md:"6"}},[n("b-button",{attrs:{variant:"success",to:{name:"AdminCouponCreate"}}},[n("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-circle"}}),t._v("\n        Add New Coupon\n      ")],1)],1)],1),t._v(" "),n("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[n("b-card-body",[n("b-row",[n("b-col",{attrs:{md:"4"}},[n("b-form-group",{attrs:{label:"Search Code:","label-for":"filter-code"}},[n("b-form-input",{attrs:{id:"filter-code",placeholder:"Enter coupon code..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)}},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1)],1),t._v(" "),n("b-col",{attrs:{md:"4"}},[n("b-form-group",{attrs:{label:"Status:","label-for":"filter-status"}},[n("b-form-select",{attrs:{id:"filter-status",options:t.statusOptions},on:{change:t.applyFilters},scopedSlots:t._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null}},[t._v("All Statuses")])]},proxy:!0}]),model:{value:t.filters.is_active,callback:function(e){t.$set(t.filters,"is_active",e)},expression:"filters.is_active"}})],1)],1),t._v(" "),n("b-col",{staticClass:"d-flex align-items-end",attrs:{md:"4"}},[n("b-button",{attrs:{variant:"primary"},on:{click:t.applyFilters}},[t._v("Apply Filters")]),t._v(" "),n("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:t.resetFilters}},[t._v("Reset")])],1)],1)],1)],1),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-table",{attrs:{striped:"",hover:"",responsive:"",items:t.coupons,fields:t.fields,busy:t.isBusy,"show-empty":"","empty-text":"No coupons found.","empty-filtered-text":"No coupons match your filters."},scopedSlots:t._u([{key:"cell(code)",fn:function(e){return[n("router-link",{attrs:{to:{name:"AdminCouponEdit",params:{id:e.item.id}}}},[t._v("\n          "+t._s(e.item.code)+"\n        ")])]}},{key:"cell(discount_percent)",fn:function(e){return[t._v("\n        "+t._s(parseFloat(e.item.discount_percent).toFixed(2))+"%\n      ")]}},{key:"cell(max_uses)",fn:function(e){return[t._v("\n        "+t._s(null!==e.item.max_uses?e.item.max_uses:"Unlimited")+"\n      ")]}},{key:"cell(is_active)",fn:function(e){return[n("b-badge",{attrs:{variant:e.item.is_active?"success":"secondary"}},[t._v("\n          "+t._s(e.item.is_active?"Active":"Inactive")+"\n        ")])]}},{key:"cell(starts_at)",fn:function(e){return[t._v("\n        "+t._s(e.item.starts_at?t.formatDate(e.item.starts_at):"N/A")+"\n      ")]}},{key:"cell(expires_at)",fn:function(e){return[t._v("\n        "+t._s(e.item.expires_at?t.formatDate(e.item.expires_at):"N/A")+"\n      ")]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.item.created_at))+"\n      ")]}},{key:"cell(actions)",fn:function(e){return[n("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary",to:{name:"AdminCouponEdit",params:{id:e.item.id}}}},[t._v("\n          Edit\n        ")]),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return t.confirmDelete(e.item.id,e.item.code)}}},[t._v("\n          Delete\n        ")])]}}])}),t._v(" "),n("b-card-footer",{staticClass:"d-flex justify-content-between align-items-center"},[n("div",[n("strong",[t._v("Total Coupons:")]),t._v(" "+t._s(t.pagination.total)+"\n      ")]),t._v(" "),n("b-pagination",{attrs:{"total-rows":t.pagination.total,"per-page":t.pagination.perPage},on:{change:t.onPageChange},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)],1),t._v(" "),n("b-modal",{attrs:{id:"delete-coupon-modal",title:"Confirm Delete","ok-variant":"danger","ok-title":"Delete"},on:{ok:t.deleteCoupon}},[n("p",[t._v("Are you sure you want to delete coupon "),n("strong",[t._v(t._s(t.itemToDelete.code))]),t._v("?")]),t._v(" "),n("p",{staticClass:"text-danger"},[n("small",[t._v("This action cannot be undone.")])])])],1)},[],!1,null,"669673b2",null).exports},4664:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(6314),o=n.n(r)()(function(t){return t[1]});o.push([t.id,"",""]);const a=o},7597:(t,e,n)=>{n.d(e,{A:()=>p});var r=n(7304);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return i(l,"_invoke",function(n,r,o){var a,i,c,u=0,l=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,i=0,c=t,f.n=n,s}};function d(n,r){for(i=n,c=r,e=0;!p&&u&&!o&&e<l.length;e++){var o,a=l[e],d=f.p,v=a[2];n>3?(o=v===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,f.v=r,f.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,i=0))}if(o||n>1)return s;throw p=!0,r}return function(o,l,v){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,v),i=l,c=v;(e=i<2?t:c)||!p;){a||(i?i<3?(i>1&&(f.n=-1),d(i,c)):f.n=c:f.v=c);try{if(u=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(p=f.n<0)?c:n.call(r,f))!==s)break}catch(e){a=t,i=1,c=e}finally{u=1}}return{value:e,done:p}}}(n,o,a),!0),l}var s={};function u(){}function l(){}function p(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),d=p.prototype=u.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=p,i(d,"constructor",p),i(p,"constructor",l),l.displayName="GeneratorFunction",i(p,o,"GeneratorFunction"),i(d),i(d,o,"Generator"),i(d,r,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:v}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){i(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},i(t,e,n,r)}function c(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){c(a,r,o,i,s,"next",t)}function s(t){c(a,r,o,i,s,"throw",t)}i(void 0)})}}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}const p=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"getAdminCoupons",value:(p=s(a().m(function t(){var e,n,o,i,c=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:{},t.p=1,t.n=2,r.A.get("/admin/coupons",{params:e});case 2:return n=t.v,t.a(2,n.data);case 3:throw t.p=3,i=t.v,console.error("CouponService.getAdminCoupons failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin coupons"};case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return p.apply(this,arguments)})},{key:"getAdminCoupon",value:(l=s(a().m(function t(e){var n,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.get("/admin/coupons/".concat(e));case 1:return n=t.v,t.a(2,n.data);case 2:throw t.p=2,i=t.v,console.error("CouponService.getAdminCoupon(".concat(e,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to fetch admin coupon details"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return l.apply(this,arguments)})},{key:"createAdminCoupon",value:(c=s(a().m(function t(e){var n,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.post("/admin/coupons",e);case 1:return n=t.v,t.a(2,n.data);case 2:throw t.p=2,i=t.v,console.error("CouponService.createAdminCoupon failed:",i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to create coupon"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return c.apply(this,arguments)})},{key:"updateAdminCoupon",value:(i=s(a().m(function t(e,n){var o,i,c;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.put("/admin/coupons/".concat(e),n);case 1:return o=t.v,t.a(2,o.data);case 2:throw t.p=2,c=t.v,console.error("CouponService.updateAdminCoupon(".concat(e,") failed:"),c),(null===(i=c.response)||void 0===i?void 0:i.data)||{error:"Failed to update coupon"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t,e){return i.apply(this,arguments)})},{key:"deleteAdminCoupon",value:(o=s(a().m(function t(e){var n,o,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.delete("/admin/coupons/".concat(e));case 1:return n=t.v,t.a(2,n.data);case 2:throw t.p=2,i=t.v,console.error("CouponService.deleteAdminCoupon(".concat(e,") failed:"),i),(null===(o=i.response)||void 0===o?void 0:o.data)||{error:"Failed to delete coupon"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return o.apply(this,arguments)})}],e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,o,i,c,l,p}())}}]);