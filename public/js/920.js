/*! For license information please see 920.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[920],{1729:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(6314),a=n.n(r)()(function(t){return t[1]});a.push([t.id,"",""]);const o=a},5933:(t,e,n)=>{n.d(e,{A:()=>p});var r=n(7304);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,o){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return i(u,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],p=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,i=0,l=t,f.n=n,c}};function m(n,r){for(i=n,l=r,e=0;!p&&s&&!a&&e<u.length;e++){var a,o=u[e],m=f.p,d=o[2];n>3?(a=d===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,f.v=r,f.n=o[1]):m<d&&(a=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,f.n=d,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,u,d){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,d),i=u,l=d;(e=i<2?t:l)||!p;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(s=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?l:n.call(r,f))!==c)break}catch(e){o=t,i=1,l=e}finally{s=1}}return{value:e,done:p}}}(n,a,o),!0),u}var c={};function s(){}function u(){}function p(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),m=p.prototype=s.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=p,i(m,"constructor",p),i(p,"constructor",u),u.displayName="GeneratorFunction",i(p,a,"GeneratorFunction"),i(m),i(m,a,"Generator"),i(m,r,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:d}})()}function i(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}i=function(t,e,n,r){if(e)a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var o=function(e,n){i(t,e,function(t){return this._invoke(e,n,t)})};o("next",0),o("throw",1),o("return",2)}},i(t,e,n,r)}function l(t,e,n,r,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void n(t)}l.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){l(o,r,a,i,c,"next",t)}function c(t){l(o,r,a,i,c,"throw",t)}i(void 0)})}}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}const p=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"getAdminTemplates",value:(p=c(o().m(function t(){var e,n,a,i,l=arguments;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t.p=1,t.n=2,r.A.get("/admin/templates",{params:e});case 2:return n=t.v,t.a(2,n.data);case 3:throw t.p=3,i=t.v,console.error("TemplateService.getAdminTemplates failed:",i),(null===(a=i.response)||void 0===a?void 0:a.data)||{error:"Failed to fetch admin templates"};case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return p.apply(this,arguments)})},{key:"getAdminTemplate",value:(u=c(o().m(function t(e){var n,a,i;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.get("/admin/templates/".concat(e));case 1:return n=t.v,t.a(2,n.data);case 2:throw t.p=2,i=t.v,console.error("TemplateService.getAdminTemplate(".concat(e,") failed:"),i),(null===(a=i.response)||void 0===a?void 0:a.data)||{error:"Failed to fetch admin template details"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return u.apply(this,arguments)})},{key:"createAdminTemplate",value:(l=c(o().m(function t(e){var n,a,i;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.post("/admin/templates",e);case 1:return n=t.v,t.a(2,n.data);case 2:throw t.p=2,i=t.v,console.error("TemplateService.createAdminTemplate failed:",i),(null===(a=i.response)||void 0===a?void 0:a.data)||{error:"Failed to create template"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return l.apply(this,arguments)})},{key:"updateAdminTemplate",value:(i=c(o().m(function t(e,n){var a,i,l;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.post("/admin/templates/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}});case 1:return a=t.v,t.a(2,a.data);case 2:throw t.p=2,l=t.v,console.error("TemplateService.updateAdminTemplate(".concat(e,") failed:"),l),(null===(i=l.response)||void 0===i?void 0:i.data)||{error:"Failed to update template"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t,e){return i.apply(this,arguments)})},{key:"deleteAdminTemplate",value:(a=c(o().m(function t(e){var n,a,i;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.A.delete("/admin/templates/".concat(e));case 1:return n=t.v,t.a(2,n.data);case 2:throw t.p=2,i=t.v,console.error("TemplateService.deleteAdminTemplate(".concat(e,") failed:"),i),(null===(a=i.response)||void 0===a?void 0:a.data)||{error:"Failed to delete template"};case 3:return t.a(2)}},t,null,[[0,2]])})),function(t){return a.apply(this,arguments)})}],e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,a,i,l,u,p}())},8920:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var r=n(5933);function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function l(n,r,a,i){var l=r&&r.prototype instanceof s?r:s,u=Object.create(l.prototype);return o(u,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],p=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,i=0,l=t,f.n=n,c}};function m(n,r){for(i=n,l=r,e=0;!p&&s&&!a&&e<u.length;e++){var a,o=u[e],m=f.p,d=o[2];n>3?(a=d===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,f.v=r,f.n=o[1]):m<d&&(a=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,f.n=d,i=0))}if(a||n>1)return c;throw p=!0,r}return function(a,u,d){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,d),i=u,l=d;(e=i<2?t:l)||!p;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(s=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(p=f.n<0)?l:n.call(r,f))!==c)break}catch(e){o=t,i=1,l=e}finally{s=1}}return{value:e,done:p}}}(n,a,i),!0),u}var c={};function s(){}function u(){}function p(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(o(e={},r,function(){return this}),e),m=p.prototype=s.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=p,o(m,"constructor",p),o(p,"constructor",u),u.displayName="GeneratorFunction",o(p,i,"GeneratorFunction"),o(m),o(m,i,"Generator"),o(m,r,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(a=function(){return{w:l,m:d}})()}function o(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}o=function(t,e,n,r){if(e)a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){o(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},o(t,e,n,r)}function i(t,e,n,r,a,o,i){try{var l=t[o](i),c=l.value}catch(t){return void n(t)}l.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function l(t){i(o,r,a,l,c,"next",t)}function c(t){i(o,r,a,l,c,"throw",t)}l(void 0)})}}const c={name:"AdminTemplateIndex",data:function(){return{isBusy:!1,templates:[],fields:[{key:"name",label:"Name",sortable:!0},{key:"product_name",label:"Product",sortable:!0},{key:"layout_type",label:"Layout Type",sortable:!1},{key:"pages",label:"Pages",sortable:!0},{key:"photo_slots",label:"Photo Slots",sortable:!0},{key:"is_active",label:"Status",sortable:!0},{key:"created_at",label:"Created At",sortable:!0},{key:"actions",label:"Actions"}],filters:{search:""},pagination:{currentPage:1,perPage:15,total:0},itemToDelete:{id:null,name:""}}},created:function(){this.fetchTemplates()},methods:{fetchTemplates:function(){var t=arguments,e=this;return l(a().m(function n(){var o,i,l,c,s;return a().w(function(n){for(;;)switch(n.p=n.n){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:1,e.isBusy=!0,n.p=1,i={page:o,per_page:e.pagination.perPage,search:e.filters.search},n.n=2,r.A.getAdminTemplates(i);case 2:l=n.v,e.templates=l.data,e.pagination.total=l.total,e.pagination.currentPage=l.current_page,n.n=4;break;case 3:n.p=3,s=n.v,console.error("Failed to fetch admin templates:",s),c=s.error||"Failed to load templates. Please try again.",e.$bvToast.toast(c,{title:"Error",variant:"danger",solid:!0}),e.templates=[];case 4:return n.p=4,e.isBusy=!1,n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))()},onPageChange:function(t){this.fetchTemplates(t)},applyFilters:function(){this.pagination.currentPage=1,this.fetchTemplates(1)},resetFilters:function(){this.filters.search="",this.pagination.currentPage=1,this.fetchTemplates(1)},confirmDelete:function(t,e){this.itemToDelete.id=t,this.itemToDelete.name=e,this.$bvModal.show("delete-template-modal")},deleteTemplate:function(t){var e=this;return l(a().m(function n(){var o,i;return a().w(function(n){for(;;)switch(n.p=n.n){case 0:return t.preventDefault(),n.p=1,n.n=2,r.A.deleteAdminTemplate(e.itemToDelete.id);case 2:e.$bvToast.toast("Template '".concat(e.itemToDelete.name,"' deleted successfully."),{title:"Success",variant:"success",solid:!0}),e.fetchTemplates(e.pagination.currentPage),e.$bvModal.hide("delete-template-modal"),n.n=4;break;case 3:n.p=3,i=n.v,console.error("Failed to delete template:",i),o=i.error||"Failed to delete template. Please try again.",e.$bvToast.toast(o,{title:"Error",variant:"danger",solid:!0}),e.$bvModal.hide("delete-template-modal");case 4:return n.a(2)}},n,null,[[1,3]])}))()},formatDate:function(t){return t?new Date(t).toLocaleString("id-ID"):""}}};var s=n(5072),u=n.n(s),p=n(1729),f={insert:"head",singleton:!1};u()(p.A,f);p.A.locals;const m=(0,n(4486).A)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{md:"6"}},[n("h2",[t._v("Template Management")])]),t._v(" "),n("b-col",{staticClass:"text-md-right",attrs:{md:"6"}},[n("b-button",{attrs:{variant:"success",to:{name:"AdminTemplateCreate"}}},[n("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-circle"}}),t._v("\n        Add New Template\n      ")],1)],1)],1),t._v(" "),n("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[n("b-card-body",[n("b-row",[n("b-col",{attrs:{md:"6"}},[n("b-form-group",{attrs:{label:"Search Template:","label-for":"filter-template"}},[n("b-form-input",{attrs:{id:"filter-template",placeholder:"Enter template name..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)}},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1)],1),t._v(" "),n("b-col",{staticClass:"d-flex align-items-end",attrs:{md:"6"}},[n("b-button",{attrs:{variant:"primary"},on:{click:t.applyFilters}},[t._v("Apply Filters")]),t._v(" "),n("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:t.resetFilters}},[t._v("Reset")])],1)],1)],1)],1),t._v(" "),n("b-card",{attrs:{"no-body":""}},[n("b-table",{attrs:{striped:"",hover:"",responsive:"",items:t.templates,fields:t.fields,busy:t.isBusy,"show-empty":"","empty-text":"No templates found.","empty-filtered-text":"No templates match your filters."},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[n("router-link",{attrs:{to:{name:"AdminTemplateEdit",params:{id:e.item.id}}}},[t._v("\n          "+t._s(e.item.name)+"\n        ")])]}},{key:"cell(product_name)",fn:function(e){return[t._v("\n        "+t._s(e.item.product?e.item.product.name:"N/A")+"\n      ")]}},{key:"cell(layout_type)",fn:function(e){return[t._v("\n        "+t._s(e.item.layout_data&&e.item.layout_data.layout_type?e.item.layout_data.layout_type:"N/A")+"\n      ")]}},{key:"cell(pages)",fn:function(e){return[t._v("\n        "+t._s(e.item.layout_data&&e.item.layout_data.pages?e.item.layout_data.pages:"N/A")+"\n      ")]}},{key:"cell(photo_slots)",fn:function(e){return[t._v("\n        "+t._s(e.item.layout_data&&e.item.layout_data.photo_slots?e.item.layout_data.photo_slots:"N/A")+"\n      ")]}},{key:"cell(is_active)",fn:function(e){return[n("b-badge",{attrs:{variant:e.item.is_active?"success":"secondary"}},[t._v("\n          "+t._s(e.item.is_active?"Active":"Inactive")+"\n        ")])]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.item.created_at))+"\n      ")]}},{key:"cell(actions)",fn:function(e){return[n("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"primary",to:{name:"AdminTemplateEdit",params:{id:e.item.id}}}},[t._v("\n          Edit\n        ")]),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return t.confirmDelete(e.item.id,e.item.name)}}},[t._v("\n          Delete\n        ")])]}}])}),t._v(" "),n("b-card-footer",{staticClass:"d-flex justify-content-between align-items-center"},[n("div",[n("strong",[t._v("Total Templates:")]),t._v(" "+t._s(t.pagination.total)+"\n      ")]),t._v(" "),n("b-pagination",{attrs:{"total-rows":t.pagination.total,"per-page":t.pagination.perPage},on:{change:t.onPageChange},model:{value:t.pagination.currentPage,callback:function(e){t.$set(t.pagination,"currentPage",e)},expression:"pagination.currentPage"}})],1)],1),t._v(" "),n("b-modal",{attrs:{id:"delete-template-modal",title:"Confirm Delete","ok-variant":"danger","ok-title":"Delete"},on:{ok:t.deleteTemplate}},[n("p",[t._v("Are you sure you want to delete template "),n("strong",[t._v(t._s(t.itemToDelete.name))]),t._v("?")]),t._v(" "),n("p",{staticClass:"text-danger"},[n("small",[t._v("This action cannot be undone.")])])])],1)},[],!1,null,"0bc5f9fe",null).exports}}]);